{"version":3,"sources":["./ott-analytics/webpack/universalModuleDefinition","./ott-analytics/playkit-ott-analytics.js","./ott-analytics/webpack/bootstrap 4862b57c72a6e2b633c8","./ott-analytics/external {\"commonjs\":\"playkit-js\",\"commonjs2\":\"playkit-js\",\"amd\":\"playkit-js\",\"root\":[\"playkit\",\"core\"]}","./ott-analytics/./index.js","./ott-analytics/./ott-analytics.js","./ott-analytics/../node_modules/playkit-js-providers/dist/playkit-bookmark-service.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","NAME","VERSION","undefined","_playkitJs","_ottAnalytics","_ottAnalytics2","obj","default","registerPlugin","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","length","descriptor","key","protoProps","staticProps","_playkitBookmarkService","OttAnalyticsEvent","LOAD","PLAY","PAUSE","FINISH","FIRST_PLAY","BITRATE_CHANGE","HIT","OttAnalytics","_BasePlugin","player","config","_this","getPrototypeOf","_isPlaying","_concurrentFlag","_fileId","_didFirstPlay","_mediaHitInterval","_playerDidError","serviceUrl","_registerListeners","logger","warn","_clearMediaHitInterval","eventManager","destroy","_this2","PlayerEvent","Event","listen","_onFirstPlay","_onPlay","_onPause","ENDED","_onEnded","SEEKED","_onSeeked","ERROR","e","_onError","VIDEO_TRACK_CHANGED","_onVideoTrackChanged","SOURCE_SELECTED","event","_onSourceSelected","MEDIA_LOADED","_onMediaLoaded","source","payload","selectedSource","parts","id","split","parseInt","_sendAnalytics","_eventParams","_startMediaHitInterval","severity","Error","Severity","CRITICAL","_playFromContinue","action","params","_this3","_validate","playerData","averageBitrate","totalBitrate","currentBitrate","fileId","bookMark","type","mediaType","mediaId","position","OTTBookmarkService","add","ks","doHttpRequest","then","data","debug","err","entryId","_logMissingParam","isAnonymous","info","isMediaHit","disableMediaHit","disableMediaMark","missingParam","_this4","isLive","setInterval","mediaHitInterval","clearInterval","currentTime","BasePlugin","defaultConfig","startTime","t","r","Symbol","iterator","a","arguments","Map","headers","service","url","XMLHttpRequest","Promise","onreadystatechange","readyState","status","JSON","parse","responseText","code","message","open","method","forEach","setRequestHeader","send","OTTConfiguration","serviceParams","apiVersion","u","assign","clone","hasError","objectType","error","MultiRequestResult","f","v","y","Array","apply","concat","requests","push","stringify","_logger","b","results","success","result","isArray","slice","keys","getLevel","setLevel","setLogLevel","getLogLevel","LogLevel","DEBUG","INFO","TIME","WARN","OFF","useDefaults","defaultLevel","context","filterLevel","log","enabledFor","invoke","time","timeEnd","level","setHandler","createDefaultHandler","formatter","unshift","Function","console","Date","getTime","set","getUrl","bookmark","RequestBuilder","partnerId"],"mappings":"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","file":"playkit-ott-analytics.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"playkit-js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"playkit-js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ottanalytics\"] = factory(require(\"playkit-js\"));\n\telse\n\t\troot[\"playkit\"] = root[\"playkit\"] || {}, root[\"playkit\"][\"ottanalytics\"] = factory(root[\"playkit\"][\"core\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"playkit-js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"playkit-js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ottanalytics\"] = factory(require(\"playkit-js\"));\n\telse\n\t\troot[\"playkit\"] = root[\"playkit\"] || {}, root[\"playkit\"][\"ottanalytics\"] = factory(root[\"playkit\"][\"core\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NAME = exports.VERSION = undefined;\n\nvar _playkitJs = __webpack_require__(0);\n\nvar _ottAnalytics = __webpack_require__(2);\n\nvar _ottAnalytics2 = _interopRequireDefault(_ottAnalytics);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _ottAnalytics2.default;\nexports.VERSION = \"0.1.5\";\nexports.NAME = \"playkit-js-ott-analytics\";\n\n/**\n * The plugin name.\n * @type {string}\n * @const\n */\n\nvar pluginName = \"ottAnalytics\";\n\n(0, _playkitJs.registerPlugin)(pluginName, _ottAnalytics2.default);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _playkitJs = __webpack_require__(0);\n\nvar _playkitBookmarkService = __webpack_require__(3);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MEDIA_TYPE = 'MEDIA';\nvar CONCURRENT = 'Concurrent';\nvar OttAnalyticsEvent = {\n  LOAD: 'LOAD',\n  PLAY: 'PLAY',\n  PAUSE: 'PAUSE',\n  FINISH: 'FINISH',\n  FIRST_PLAY: 'FIRST_PLAY',\n  BITRATE_CHANGE: 'BITRATE_CHANGE',\n  HIT: 'HIT'\n};\n\nvar OttAnalytics = function (_BasePlugin) {\n  _inherits(OttAnalytics, _BasePlugin);\n\n  _createClass(OttAnalytics, null, [{\n    key: 'isValid',\n\n\n    /**\n     * Whether the ima plugin is valid.\n     * @static\n     * @override\n     * @public\n     */\n    value: function isValid() {\n      return true;\n    }\n    /**\n     * The default configuration of the plugin.\n     * @type {Object}\n     * @static\n     */\n\n  }]);\n\n  /**\n   * @constructor\n   * @param {string} name - The plugin name.\n   * @param {Player} player - The player instance.\n   * @param {Object} config - The plugin config.\n   */\n  function OttAnalytics(name, player, config) {\n    _classCallCheck(this, OttAnalytics);\n\n    var _this = _possibleConstructorReturn(this, (OttAnalytics.__proto__ || Object.getPrototypeOf(OttAnalytics)).call(this, name, player, config));\n\n    _this._isPlaying = false;\n    _this._concurrentFlag = false;\n    _this._fileId = 0;\n    _this._didFirstPlay = false;\n    _this._mediaHitInterval = null;\n    _this._playerDidError = false;\n\n    if (_this.config.serviceUrl) {\n      _this._registerListeners();\n    } else {\n      _this.logger.warn('No service URL provided. Tracking aborted');\n    }\n    return _this;\n  }\n\n  /**\n   * reset the plugin.\n   * @override\n   * @public\n   * @returns {void}\n   */\n\n\n  _createClass(OttAnalytics, [{\n    key: 'reset',\n    value: function reset() {\n      this._clearMediaHitInterval();\n      this._didFirstPlay = false;\n      this._playerDidError = false;\n    }\n\n    /**\n     * Destroys the plugin.\n     * @override\n     * @public\n     * @returns {void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this.eventManager.destroy();\n    }\n\n    /**\n     * Registers the player listeners.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_registerListeners',\n    value: function _registerListeners() {\n      var _this2 = this;\n\n      var PlayerEvent = this.player.Event;\n      this.eventManager.listen(this.player, PlayerEvent.FIRST_PLAY, function () {\n        return _this2._onFirstPlay();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.PLAY, function () {\n        return _this2._onPlay();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.PAUSE, function () {\n        return _this2._onPause();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.ENDED, function () {\n        return _this2._onEnded();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.SEEKED, function () {\n        return _this2._onSeeked();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.ERROR, function (e) {\n        return _this2._onError(e);\n      });\n      this.eventManager.listen(this.player, PlayerEvent.VIDEO_TRACK_CHANGED, function () {\n        return _this2._onVideoTrackChanged();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.SOURCE_SELECTED, function (event) {\n        return _this2._onSourceSelected(event);\n      });\n      this.eventManager.listen(this.player, PlayerEvent.MEDIA_LOADED, function () {\n        return _this2._onMediaLoaded();\n      });\n    }\n\n    /**\n     * The source selected event listener.\n     * @param {Object} event - The event object.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onSourceSelected',\n    value: function _onSourceSelected(event) {\n      try {\n        var source = event.payload.selectedSource[0];\n        var parts = source.id.split(',');\n        var id = parts[0];\n        this._fileId = parseInt(id);\n      } catch (e) {\n        this.logger.warn('Unable to parse file ID');\n      }\n    }\n\n    /**\n     * The media loaded event listener.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onMediaLoaded',\n    value: function _onMediaLoaded() {\n      this._sendAnalytics(OttAnalyticsEvent.LOAD, this._eventParams);\n    }\n\n    /**\n     * The play event listener.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onPlay',\n    value: function _onPlay() {\n      this._isPlaying = true;\n      this._startMediaHitInterval();\n      this._sendAnalytics(OttAnalyticsEvent.PLAY, this._eventParams);\n    }\n\n    /**\n     * The pause event listener.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onPause',\n    value: function _onPause() {\n      this._isPlaying = false;\n      if (this._didFirstPlay) {\n        this._sendAnalytics(OttAnalyticsEvent.PAUSE, this._eventParams);\n      }\n    }\n\n    /**\n     * The ended event listener.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onEnded',\n    value: function _onEnded() {\n      this._isPlaying = false;\n      this._clearMediaHitInterval();\n      this._sendAnalytics(OttAnalyticsEvent.FINISH, this._eventParams);\n    }\n\n    /**\n     * The error event listener.\n     * @param {FakeEvent} event - player eventgit chec\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onError',\n    value: function _onError(event) {\n      if (event.payload && event.payload.severity === _playkitJs.Error.Severity.CRITICAL) {\n        this._isPlaying = false;\n        this._playerDidError = true;\n        this._clearMediaHitInterval();\n      }\n    }\n\n    /**\n     * The first play event listener.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onFirstPlay',\n    value: function _onFirstPlay() {\n      this._didFirstPlay = true;\n      this._sendAnalytics(OttAnalyticsEvent.FIRST_PLAY, this._eventParams);\n    }\n\n    /**\n     * Sets _playFromContinue to false on seeked event.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onSeeked',\n    value: function _onSeeked() {\n      this._playFromContinue = false;\n    }\n\n    /**\n     * Send BITRATE_CHANGE analytic.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onVideoTrackChanged',\n    value: function _onVideoTrackChanged() {\n      this._sendAnalytics(OttAnalyticsEvent.BITRATE_CHANGE, this._eventParams);\n    }\n\n    /**\n     * Get the player params which relevant to analytics request.\n     * @private\n     * @returns {Object} - The player params\n     */\n\n  }, {\n    key: '_sendAnalytics',\n\n\n    /**\n     * Send analytics.\n     * @param {string} action - The action\n     * @param {string} params - The params\n     * @private\n     * @returns {void}\n     */\n    value: function _sendAnalytics(action, params) {\n      var _this3 = this;\n\n      if (!this._validate(action)) {\n        return;\n      }\n      var playerData = {\n        action: action,\n        averageBitrate: 0,\n        totalBitrate: 0,\n        currentBitrate: 0,\n        fileId: params.fileId\n      };\n      var bookMark = {\n        type: params.mediaType,\n        id: params.mediaId,\n        position: params.position,\n        playerData: playerData\n      };\n      var request = _playkitBookmarkService.OTTBookmarkService.add(this.config.serviceUrl, this.config.ks, bookMark);\n      request.doHttpRequest().then(function (data) {\n        if (data === CONCURRENT) {\n          _this3._concurrentFlag = true;\n        } else {\n          _this3.logger.debug('Analytics event sent', bookMark);\n        }\n      }, function (err) {\n        _this3.logger.warn('Failed to send analytics event', bookMark, err);\n      });\n    }\n  }, {\n    key: '_validate',\n    value: function _validate(action) {\n      if (this._playerDidError) {\n        return false;\n      }\n      if (!this.config.entryId) {\n        this._logMissingParam('entryId');\n        return false;\n      }\n      if (!this._fileId) {\n        this._logMissingParam('fileId');\n        return false;\n      }\n      if (this.config.isAnonymous) {\n        this.logger.info('block report for anonymous user');\n        return false;\n      }\n      var isMediaHit = action === OttAnalyticsEvent.HIT;\n      if (isMediaHit && this.config.disableMediaHit) {\n        this.logger.info('block MediaHit report');\n        return false;\n      }\n      if (!isMediaHit && this.config.disableMediaMark) {\n        this.logger.info('block MediaMark report');\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: '_logMissingParam',\n    value: function _logMissingParam(missingParam) {\n      this.logger.warn('block report because of missing param ' + missingParam);\n    }\n\n    /**\n     * Starts the media hit interval.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_startMediaHitInterval',\n    value: function _startMediaHitInterval() {\n      var _this4 = this;\n\n      if (!this.player.isLive()) {\n        this._clearMediaHitInterval();\n        this._mediaHitInterval = setInterval(function () {\n          if (_this4._isPlaying) {\n            if (_this4._concurrentFlag || _this4._eventParams.position === 0) {\n              return;\n            } else {\n              _this4._sendAnalytics(OttAnalyticsEvent.HIT, _this4._eventParams);\n            }\n          }\n        }, this.config.mediaHitInterval * 1000);\n      }\n    }\n\n    /**\n     * Clears the media hit interval.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_clearMediaHitInterval',\n    value: function _clearMediaHitInterval() {\n      if (this._mediaHitInterval) {\n        clearInterval(this._mediaHitInterval);\n        this._mediaHitInterval = null;\n      }\n    }\n  }, {\n    key: '_eventParams',\n    get: function get() {\n      return {\n        mediaType: MEDIA_TYPE,\n        fileId: this._fileId,\n        mediaId: this.config.entryId,\n        position: this.player.currentTime\n      };\n    }\n  }]);\n\n  return OttAnalytics;\n}(_playkitJs.BasePlugin);\n\nOttAnalytics.defaultConfig = {\n  mediaHitInterval: 30,\n  startTime: null,\n  disableMediaHit: false,\n  disableMediaMark: false\n};\nexports.default = OttAnalytics;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(e,t){ true?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.bookmark=t():(e.playkit=e.playkit||{},e.playkit.services=e.playkit.services||{},e.playkit.services.bookmark=t())}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=10)}([function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;r(this,e),this.headers=t}return i(e,[{key:\"getUrl\",value:function(e){return e+\"/service/\"+this.service+(this.action?\"/action/\"+this.action:\"\")}},{key:\"doHttpRequest\",value:function(){var e=this;if(!this.url)throw new Error(\"serviceUrl is mandatory for request builder\");var t=new XMLHttpRequest;return new Promise(function(n,r){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var e=JSON.parse(t.responseText);e&&\"object\"===(void 0===e?\"undefined\":o(e))&&e.code&&e.message?r(e):n(e)}else r(t.responseText)},t.open(e.method,e.url),e.headers.forEach(function(e,n){t.setRequestHeader(n,e)}),t.send(e.params)})}}]),e}();t.default=a},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0}),t.OTTConfiguration=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),a={serviceParams:{apiVersion:\"4.7.1\"}},u=function(){function e(){r(this,e)}return o(e,null,[{key:\"set\",value:function(e){e&&Object.assign(a,e)}},{key:\"get\",value:function(){return(0,i.clone)(a)}}]),e}();t.default=u,t.OTTConfiguration=u},,function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function e(t){r(this,e),this.hasError=!1,\"KalturaAPIException\"===t.objectType?(this.hasError=!0,this.error=new i(t.code,t.message)):t.error&&\"KalturaAPIException\"===t.error.objectType?(this.hasError=!0,this.error=new i(t.error.code,t.error.message)):this.data=t};t.default=o;var i=function e(t,n){r(this,e),this.code=t,this.message=n}},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function a(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function u(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.MultiRequestResult=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(6),p=r(f),v=n(3),d=r(v),y=function(e){function t(){var e,n,r,o;i(this,t);for(var u=arguments.length,s=Array(u),c=0;c<u;c++)s[c]=arguments[c];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.requests=[],o=n,a(r,o)}return u(t,e),s(t,[{key:\"add\",value:function(e){this.requests.push(e);var t={},n={service:e.service,action:e.action};return Object.assign(t,o({},this.requests.length,Object.assign(n,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:\"execute\",value:function(){var e=this;try{this.params=JSON.stringify(this.params)}catch(e){t._logger.error(\"\"+e.message)}return new Promise(function(t,n){e.doHttpRequest().then(function(e){t(new b(e))},function(e){n(\"Error on multiRequest execution, error <\"+e+\">.\")})})}}]),t}(l.default);y._logger=(0,p.default)(\"MultiRequestBuilder\"),t.default=y;var b=t.MultiRequestResult=function e(t){var n=this;i(this,e),this.results=[],this.success=!0,(t.result?t.result:t).forEach(function(t){var r=new d.default(t);if(n.results.push(r),r.hasError)return e._logger.error(\"Service returned an error with error code: \"+r.error.code+\" and message: \"+r.error.message+\".\"),void(n.success=!1)})};b._logger=(0,p.default)(\"MultiRequestResult\")},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=function e(t){var n=void 0;return Array.isArray(t)?(n=t.length>0?t.slice(0):[],n.forEach(function(t,o){(\"object\"===(void 0===t?\"undefined\":r(t))&&t!=={}||Array.isArray(t)&&t.length>0)&&(n[o]=e(t))})):\"object\"===(void 0===t?\"undefined\":r(t))?(n=Object.assign({},t),Object.keys(n).forEach(function(t){(\"object\"===r(n[t])&&n[t]!=={}||Array.isArray(n[t])&&n[t].length>0)&&(n[t]=e(n[t]))})):n=t,n};t.clone=o},function(e,t,n){\"use strict\";function r(e){return e?u.get(e):u}function o(e){return r(e).getLevel()}function i(e,t){r(t).setLevel(e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var a=n(7),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s={DEBUG:u.DEBUG,INFO:u.INFO,TIME:u.TIME,WARN:u.WARN,ERROR:u.ERROR,OFF:u.OFF};u.useDefaults({defaultLevel:u.ERROR}),t.default=r,t.LogLevel=s,t.getLogLevel=o,t.setLogLevel=i},function(e,t,n){var r,o;/*!\n * js-logger - http://github.com/jonnyreeves/js-logger\n * Jonny Reeves, http://jonnyreeves.co.uk/\n * js-logger may be freely distributed under the MIT license.\n */\n!function(i){\"use strict\";var a={};a.VERSION=\"1.4.1\";var u,s={},c=function(e,t){return function(){return t.apply(e,arguments)}},l=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};a.DEBUG=f(1,\"DEBUG\"),a.INFO=f(2,\"INFO\"),a.TIME=f(3,\"TIME\"),a.WARN=f(4,\"WARN\"),a.ERROR=f(8,\"ERROR\"),a.OFF=f(99,\"OFF\");var p=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};p.prototype={setLevel:function(e){e&&\"value\"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(a.DEBUG,arguments)},info:function(){this.invoke(a.INFO,arguments)},warn:function(){this.invoke(a.WARN,arguments)},error:function(){this.invoke(a.ERROR,arguments)},time:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,\"start\"])},timeEnd:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,\"end\"])},invoke:function(e,t){u&&this.enabledFor(e)&&u(t,l({level:e},this.context))}};var v=new p({filterLevel:a.OFF});!function(){var e=a;e.enabledFor=c(v,v.enabledFor),e.debug=c(v,v.debug),e.time=c(v,v.time),e.timeEnd=c(v,v.timeEnd),e.info=c(v,v.info),e.warn=c(v,v.warn),e.error=c(v,v.error),e.log=e.info}(),a.setHandler=function(e){u=e},a.setLevel=function(e){v.setLevel(e);for(var t in s)s.hasOwnProperty(t)&&s[t].setLevel(e)},a.getLevel=function(){return v.getLevel()},a.get=function(e){return s[e]||(s[e]=new p(l({name:e},v.context)))},a.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift(\"[\"+t.name+\"]\")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return\"undefined\"==typeof console?function(){}:function(r,o){r=Array.prototype.slice.call(r);var i,u=console.log;o.level===a.TIME?(i=(o.name?\"[\"+o.name+\"] \":\"\")+r[0],\"start\"===r[1]?console.time?console.time(i):t[i]=(new Date).getTime():console.timeEnd?console.timeEnd(i):n(u,[i+\": \"+((new Date).getTime()-t[i])+\"ms\"])):(o.level===a.WARN&&console.warn?u=console.warn:o.level===a.ERROR&&console.error?u=console.error:o.level===a.INFO&&console.info?u=console.info:o.level===a.DEBUG&&console.debug&&(u=console.debug),e.formatter(r,o),n(u,r))}},a.useDefaults=function(e){a.setLevel(e&&e.defaultLevel||a.DEBUG),a.setHandler(a.createDefaultHandler(e))},r=a,void 0!==(o=\"function\"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}()},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function a(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),c=r(s),l=n(0),f=r(l),p=n(1),v=r(p),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,null,[{key:\"add\",value:function(e,t,n){var r=new Map;r.set(\"Content-Type\",\"application/json\");var o=new f.default(r);o.service=\"bookmark\",o.action=\"add\",o.method=\"POST\",o.url=o.getUrl(e);var i={objectType:\"KalturaBookmarkPlayerData\",action:n.playerData.action,averageBitrate:n.playerData.averageBitrate,totalBitrate:n.playerData.totalBitrate,currentBitrate:n.playerData.currentBitrate,fileId:n.playerData.fileId},a={objectType:\"KalturaBookmark\",type:n.type,id:n.id,position:n.position,playerData:i},u=v.default.get(),s=u.serviceParams;return Object.assign(s,{bookmark:a,ks:t}),o.params=JSON.stringify(s),o}}]),t}(c.default);t.default=d},,function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.VERSION=t.NAME=t.RequestBuilder=t.OTTConfiguration=t.OTTBookmarkService=void 0;var o=n(0),i=r(o),a=n(1),u=r(a),s=n(8),c=r(s);t.OTTBookmarkService=c.default,t.OTTConfiguration=u.default,t.RequestBuilder=i.default,t.NAME=\"playkit-js-providers-bookmark-service\",t.VERSION=\"2.3.2\"},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),u=r(a),s=n(1),c=r(s),l=function(){function e(){o(this,e)}return i(e,null,[{key:\"getMultiRequest\",value:function(e,t){var n=c.default.get(),r=n.serviceParams;e&&Object.assign(r,{ks:e}),t&&Object.assign(r,{partnerId:t});var o=new Map;o.set(\"Content-Type\",\"application/json\");var i=new u.default(o);return i.method=\"POST\",i.service=\"multirequest\",i.url=i.getUrl(n.serviceUrl),i.params=r,i}}]),e}();t.default=l}])});\n//# sourceMappingURL=playkit-bookmark-service.js.map\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// playkit-ott-analytics.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4862b57c72a6e2b633c8","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"playkit-js\",\"commonjs2\":\"playkit-js\",\"amd\":\"playkit-js\",\"root\":[\"playkit\",\"core\"]}\n// module id = 0\n// module chunks = 0","// @flow\nimport {registerPlugin} from 'playkit-js'\nimport OttAnalytics from './ott-analytics'\n\ndeclare var __VERSION__: string;\ndeclare var __NAME__: string;\n\nexport default OttAnalytics;\nexport {__VERSION__ as VERSION, __NAME__ as NAME};\n\n/**\n * The plugin name.\n * @type {string}\n * @const\n */\nconst pluginName: string = \"ottAnalytics\";\n\nregisterPlugin(pluginName, OttAnalytics);\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","//@flow\nimport {BasePlugin, Error, FakeEvent} from 'playkit-js'\nimport {OTTBookmarkService, RequestBuilder} from 'playkit-js-providers/dist/playkit-bookmark-service'\n\ntype OttAnalyticsEventType = { [event: string]: string };\nconst MEDIA_TYPE = 'MEDIA';\nconst CONCURRENT = 'Concurrent';\nconst OttAnalyticsEvent: OttAnalyticsEventType = {\n  LOAD: 'LOAD',\n  PLAY: 'PLAY',\n  PAUSE: 'PAUSE',\n  FINISH: 'FINISH',\n  FIRST_PLAY: 'FIRST_PLAY',\n  BITRATE_CHANGE: 'BITRATE_CHANGE',\n  HIT: 'HIT'\n};\n\nexport default class OttAnalytics extends BasePlugin {\n  /**\n   * The default configuration of the plugin.\n   * @type {Object}\n   * @static\n   */\n  static defaultConfig: Object = {\n    mediaHitInterval: 30,\n    startTime: null,\n    disableMediaHit: false,\n    disableMediaMark: false\n  };\n\n  /**\n   * Whether the ima plugin is valid.\n   * @static\n   * @override\n   * @public\n   */\n  static isValid(): boolean {\n    return true;\n  }\n\n  _isPlaying: boolean = false;\n  _concurrentFlag: boolean = false;\n  _fileId: number = 0;\n  _didFirstPlay: boolean = false;\n  _mediaHitInterval: ?number = null;\n  _playerDidError: boolean = false;\n\n  /**\n   * @constructor\n   * @param {string} name - The plugin name.\n   * @param {Player} player - The player instance.\n   * @param {Object} config - The plugin config.\n   */\n  constructor(name: string, player: Player, config: Object) {\n    super(name, player, config);\n    if (this.config.serviceUrl) {\n      this._registerListeners();\n    } else {\n      this.logger.warn('No service URL provided. Tracking aborted');\n    }\n  }\n\n  /**\n   * reset the plugin.\n   * @override\n   * @public\n   * @returns {void}\n   */\n  reset(): void {\n    this._clearMediaHitInterval();\n    this._didFirstPlay = false;\n    this._playerDidError = false;\n  }\n\n  /**\n   * Destroys the plugin.\n   * @override\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.eventManager.destroy();\n  }\n\n  /**\n   * Registers the player listeners.\n   * @private\n   * @returns {void}\n   */\n  _registerListeners(): void {\n    const PlayerEvent = this.player.Event;\n    this.eventManager.listen(this.player, PlayerEvent.FIRST_PLAY, () => this._onFirstPlay());\n    this.eventManager.listen(this.player, PlayerEvent.PLAY, () => this._onPlay());\n    this.eventManager.listen(this.player, PlayerEvent.PAUSE, () => this._onPause());\n    this.eventManager.listen(this.player, PlayerEvent.ENDED, () => this._onEnded());\n    this.eventManager.listen(this.player, PlayerEvent.SEEKED, () => this._onSeeked());\n    this.eventManager.listen(this.player, PlayerEvent.ERROR, (e) => this._onError(e));\n    this.eventManager.listen(this.player, PlayerEvent.VIDEO_TRACK_CHANGED, () => this._onVideoTrackChanged());\n    this.eventManager.listen(this.player, PlayerEvent.SOURCE_SELECTED, event => this._onSourceSelected(event));\n    this.eventManager.listen(this.player, PlayerEvent.MEDIA_LOADED, () => this._onMediaLoaded());\n  }\n\n  /**\n   * The source selected event listener.\n   * @param {Object} event - The event object.\n   * @private\n   * @returns {void}\n   */\n  _onSourceSelected(event: Object): void {\n    try {\n      const source = event.payload.selectedSource[0];\n      const parts = source.id.split(',');\n      const id = parts[0];\n      this._fileId = parseInt(id);\n    } catch (e) {\n      this.logger.warn('Unable to parse file ID');\n    }\n  }\n\n  /**\n   * The media loaded event listener.\n   * @private\n   * @returns {void}\n   */\n  _onMediaLoaded(): void {\n    this._sendAnalytics(OttAnalyticsEvent.LOAD, this._eventParams);\n  }\n\n  /**\n   * The play event listener.\n   * @private\n   * @returns {void}\n   */\n  _onPlay(): void {\n    this._isPlaying = true;\n    this._startMediaHitInterval();\n    this._sendAnalytics(OttAnalyticsEvent.PLAY, this._eventParams);\n  }\n\n  /**\n   * The pause event listener.\n   * @private\n   * @returns {void}\n   */\n  _onPause(): void {\n    this._isPlaying = false;\n    if (this._didFirstPlay) {\n      this._sendAnalytics(OttAnalyticsEvent.PAUSE, this._eventParams);\n    }\n  }\n\n  /**\n   * The ended event listener.\n   * @private\n   * @returns {void}\n   */\n  _onEnded(): void {\n    this._isPlaying = false;\n    this._clearMediaHitInterval();\n    this._sendAnalytics(OttAnalyticsEvent.FINISH, this._eventParams);\n  }\n\n  /**\n   * The error event listener.\n   * @param {FakeEvent} event - player eventgit chec\n   * @private\n   * @returns {void}\n   */\n  _onError(event: FakeEvent): void {\n    if (event.payload && event.payload.severity === Error.Severity.CRITICAL) {\n      this._isPlaying = false;\n      this._playerDidError = true;\n      this._clearMediaHitInterval();\n    }\n  }\n\n  /**\n   * The first play event listener.\n   * @private\n   * @returns {void}\n   */\n  _onFirstPlay(): void {\n    this._didFirstPlay = true;\n    this._sendAnalytics(OttAnalyticsEvent.FIRST_PLAY, this._eventParams);\n  }\n\n  /**\n   * Sets _playFromContinue to false on seeked event.\n   * @private\n   * @returns {void}\n   */\n  _onSeeked(): void {\n    this._playFromContinue = false;\n  }\n\n  /**\n   * Send BITRATE_CHANGE analytic.\n   * @private\n   * @returns {void}\n   */\n  _onVideoTrackChanged(): void {\n    this._sendAnalytics(OttAnalyticsEvent.BITRATE_CHANGE, this._eventParams);\n  }\n\n  /**\n   * Get the player params which relevant to analytics request.\n   * @private\n   * @returns {Object} - The player params\n   */\n  get _eventParams(): Object {\n    return {\n      mediaType: MEDIA_TYPE,\n      fileId: this._fileId,\n      mediaId: this.config.entryId,\n      position: this.player.currentTime\n    };\n  }\n\n  /**\n   * Send analytics.\n   * @param {string} action - The action\n   * @param {string} params - The params\n   * @private\n   * @returns {void}\n   */\n  _sendAnalytics(action: string, params: Object): void {\n    if (!this._validate(action)) {\n      return;\n    }\n    const playerData: Object = {\n      action: action,\n      averageBitrate: 0,\n      totalBitrate: 0,\n      currentBitrate: 0,\n      fileId: params.fileId,\n    };\n    const bookMark: Object = {\n      type: params.mediaType,\n      id: params.mediaId,\n      position: params.position,\n      playerData: playerData\n    };\n    const request: RequestBuilder = OTTBookmarkService.add(this.config.serviceUrl, this.config.ks, bookMark);\n    request.doHttpRequest()\n      .then((data) => {\n        if (data === CONCURRENT) {\n          this._concurrentFlag = true;\n        } else {\n          this.logger.debug('Analytics event sent', bookMark);\n        }\n      }, err => {\n        this.logger.warn('Failed to send analytics event', bookMark, err);\n      });\n  }\n\n  _validate(action: string): boolean {\n    if (this._playerDidError) {\n      return false;\n    }\n    if (!this.config.entryId) {\n      this._logMissingParam('entryId');\n      return false;\n    }\n    if (!this._fileId) {\n      this._logMissingParam('fileId');\n      return false;\n    }\n    if (this.config.isAnonymous) {\n      this.logger.info(`block report for anonymous user`);\n      return false;\n    }\n    const isMediaHit = action === OttAnalyticsEvent.HIT;\n    if (isMediaHit && this.config.disableMediaHit) {\n      this.logger.info(`block MediaHit report`);\n      return false;\n    }\n    if (!isMediaHit && this.config.disableMediaMark) {\n      this.logger.info(`block MediaMark report`);\n      return false;\n    }\n    return true;\n  }\n\n  _logMissingParam(missingParam: string): void {\n    this.logger.warn(`block report because of missing param ${missingParam}`);\n  }\n\n  /**\n   * Starts the media hit interval.\n   * @private\n   * @returns {void}\n   */\n  _startMediaHitInterval(): void {\n    if (!this.player.isLive()) {\n      this._clearMediaHitInterval();\n      this._mediaHitInterval = setInterval(() => {\n        if (this._isPlaying) {\n          if (this._concurrentFlag || this._eventParams.position === 0) {\n            return;\n          } else {\n            this._sendAnalytics(OttAnalyticsEvent.HIT, this._eventParams);\n          }\n        }\n      }, this.config.mediaHitInterval * 1000);\n    }\n  }\n\n  /**\n   * Clears the media hit interval.\n   * @private\n   * @returns {void}\n   */\n  _clearMediaHitInterval(): void {\n    if (this._mediaHitInterval) {\n      clearInterval(this._mediaHitInterval);\n      this._mediaHitInterval = null;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ott-analytics.js","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.bookmark=t():(e.playkit=e.playkit||{},e.playkit.services=e.playkit.services||{},e.playkit.services.bookmark=t())}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=10)}([function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;r(this,e),this.headers=t}return i(e,[{key:\"getUrl\",value:function(e){return e+\"/service/\"+this.service+(this.action?\"/action/\"+this.action:\"\")}},{key:\"doHttpRequest\",value:function(){var e=this;if(!this.url)throw new Error(\"serviceUrl is mandatory for request builder\");var t=new XMLHttpRequest;return new Promise(function(n,r){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var e=JSON.parse(t.responseText);e&&\"object\"===(void 0===e?\"undefined\":o(e))&&e.code&&e.message?r(e):n(e)}else r(t.responseText)},t.open(e.method,e.url),e.headers.forEach(function(e,n){t.setRequestHeader(n,e)}),t.send(e.params)})}}]),e}();t.default=a},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0}),t.OTTConfiguration=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),a={serviceParams:{apiVersion:\"4.7.1\"}},u=function(){function e(){r(this,e)}return o(e,null,[{key:\"set\",value:function(e){e&&Object.assign(a,e)}},{key:\"get\",value:function(){return(0,i.clone)(a)}}]),e}();t.default=u,t.OTTConfiguration=u},,function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function e(t){r(this,e),this.hasError=!1,\"KalturaAPIException\"===t.objectType?(this.hasError=!0,this.error=new i(t.code,t.message)):t.error&&\"KalturaAPIException\"===t.error.objectType?(this.hasError=!0,this.error=new i(t.error.code,t.error.message)):this.data=t};t.default=o;var i=function e(t,n){r(this,e),this.code=t,this.message=n}},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function a(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function u(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.MultiRequestResult=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(6),p=r(f),v=n(3),d=r(v),y=function(e){function t(){var e,n,r,o;i(this,t);for(var u=arguments.length,s=Array(u),c=0;c<u;c++)s[c]=arguments[c];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.requests=[],o=n,a(r,o)}return u(t,e),s(t,[{key:\"add\",value:function(e){this.requests.push(e);var t={},n={service:e.service,action:e.action};return Object.assign(t,o({},this.requests.length,Object.assign(n,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:\"execute\",value:function(){var e=this;try{this.params=JSON.stringify(this.params)}catch(e){t._logger.error(\"\"+e.message)}return new Promise(function(t,n){e.doHttpRequest().then(function(e){t(new b(e))},function(e){n(\"Error on multiRequest execution, error <\"+e+\">.\")})})}}]),t}(l.default);y._logger=(0,p.default)(\"MultiRequestBuilder\"),t.default=y;var b=t.MultiRequestResult=function e(t){var n=this;i(this,e),this.results=[],this.success=!0,(t.result?t.result:t).forEach(function(t){var r=new d.default(t);if(n.results.push(r),r.hasError)return e._logger.error(\"Service returned an error with error code: \"+r.error.code+\" and message: \"+r.error.message+\".\"),void(n.success=!1)})};b._logger=(0,p.default)(\"MultiRequestResult\")},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=function e(t){var n=void 0;return Array.isArray(t)?(n=t.length>0?t.slice(0):[],n.forEach(function(t,o){(\"object\"===(void 0===t?\"undefined\":r(t))&&t!=={}||Array.isArray(t)&&t.length>0)&&(n[o]=e(t))})):\"object\"===(void 0===t?\"undefined\":r(t))?(n=Object.assign({},t),Object.keys(n).forEach(function(t){(\"object\"===r(n[t])&&n[t]!=={}||Array.isArray(n[t])&&n[t].length>0)&&(n[t]=e(n[t]))})):n=t,n};t.clone=o},function(e,t,n){\"use strict\";function r(e){return e?u.get(e):u}function o(e){return r(e).getLevel()}function i(e,t){r(t).setLevel(e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var a=n(7),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s={DEBUG:u.DEBUG,INFO:u.INFO,TIME:u.TIME,WARN:u.WARN,ERROR:u.ERROR,OFF:u.OFF};u.useDefaults({defaultLevel:u.ERROR}),t.default=r,t.LogLevel=s,t.getLogLevel=o,t.setLogLevel=i},function(e,t,n){var r,o;/*!\n * js-logger - http://github.com/jonnyreeves/js-logger\n * Jonny Reeves, http://jonnyreeves.co.uk/\n * js-logger may be freely distributed under the MIT license.\n */\n!function(i){\"use strict\";var a={};a.VERSION=\"1.4.1\";var u,s={},c=function(e,t){return function(){return t.apply(e,arguments)}},l=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};a.DEBUG=f(1,\"DEBUG\"),a.INFO=f(2,\"INFO\"),a.TIME=f(3,\"TIME\"),a.WARN=f(4,\"WARN\"),a.ERROR=f(8,\"ERROR\"),a.OFF=f(99,\"OFF\");var p=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};p.prototype={setLevel:function(e){e&&\"value\"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(a.DEBUG,arguments)},info:function(){this.invoke(a.INFO,arguments)},warn:function(){this.invoke(a.WARN,arguments)},error:function(){this.invoke(a.ERROR,arguments)},time:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,\"start\"])},timeEnd:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,\"end\"])},invoke:function(e,t){u&&this.enabledFor(e)&&u(t,l({level:e},this.context))}};var v=new p({filterLevel:a.OFF});!function(){var e=a;e.enabledFor=c(v,v.enabledFor),e.debug=c(v,v.debug),e.time=c(v,v.time),e.timeEnd=c(v,v.timeEnd),e.info=c(v,v.info),e.warn=c(v,v.warn),e.error=c(v,v.error),e.log=e.info}(),a.setHandler=function(e){u=e},a.setLevel=function(e){v.setLevel(e);for(var t in s)s.hasOwnProperty(t)&&s[t].setLevel(e)},a.getLevel=function(){return v.getLevel()},a.get=function(e){return s[e]||(s[e]=new p(l({name:e},v.context)))},a.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift(\"[\"+t.name+\"]\")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return\"undefined\"==typeof console?function(){}:function(r,o){r=Array.prototype.slice.call(r);var i,u=console.log;o.level===a.TIME?(i=(o.name?\"[\"+o.name+\"] \":\"\")+r[0],\"start\"===r[1]?console.time?console.time(i):t[i]=(new Date).getTime():console.timeEnd?console.timeEnd(i):n(u,[i+\": \"+((new Date).getTime()-t[i])+\"ms\"])):(o.level===a.WARN&&console.warn?u=console.warn:o.level===a.ERROR&&console.error?u=console.error:o.level===a.INFO&&console.info?u=console.info:o.level===a.DEBUG&&console.debug&&(u=console.debug),e.formatter(r,o),n(u,r))}},a.useDefaults=function(e){a.setLevel(e&&e.defaultLevel||a.DEBUG),a.setHandler(a.createDefaultHandler(e))},r=a,void 0!==(o=\"function\"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}()},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function a(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),c=r(s),l=n(0),f=r(l),p=n(1),v=r(p),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,null,[{key:\"add\",value:function(e,t,n){var r=new Map;r.set(\"Content-Type\",\"application/json\");var o=new f.default(r);o.service=\"bookmark\",o.action=\"add\",o.method=\"POST\",o.url=o.getUrl(e);var i={objectType:\"KalturaBookmarkPlayerData\",action:n.playerData.action,averageBitrate:n.playerData.averageBitrate,totalBitrate:n.playerData.totalBitrate,currentBitrate:n.playerData.currentBitrate,fileId:n.playerData.fileId},a={objectType:\"KalturaBookmark\",type:n.type,id:n.id,position:n.position,playerData:i},u=v.default.get(),s=u.serviceParams;return Object.assign(s,{bookmark:a,ks:t}),o.params=JSON.stringify(s),o}}]),t}(c.default);t.default=d},,function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.VERSION=t.NAME=t.RequestBuilder=t.OTTConfiguration=t.OTTBookmarkService=void 0;var o=n(0),i=r(o),a=n(1),u=r(a),s=n(8),c=r(s);t.OTTBookmarkService=c.default,t.OTTConfiguration=u.default,t.RequestBuilder=i.default,t.NAME=\"playkit-js-providers-bookmark-service\",t.VERSION=\"2.3.2\"},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),u=r(a),s=n(1),c=r(s),l=function(){function e(){o(this,e)}return i(e,null,[{key:\"getMultiRequest\",value:function(e,t){var n=c.default.get(),r=n.serviceParams;e&&Object.assign(r,{ks:e}),t&&Object.assign(r,{partnerId:t});var o=new Map;o.set(\"Content-Type\",\"application/json\");var i=new u.default(o);return i.method=\"POST\",i.service=\"multirequest\",i.url=i.getUrl(n.serviceUrl),i.params=r,i}}]),e}();t.default=l}])});\n//# sourceMappingURL=playkit-bookmark-service.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/playkit-js-providers/dist/playkit-bookmark-service.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}