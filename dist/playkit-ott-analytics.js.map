{"version":3,"sources":["./ott-analytics/webpack/universalModuleDefinition","./ott-analytics/playkit-ott-analytics.js","./ott-analytics/webpack/bootstrap 248363df0658a06a0bf2","./ott-analytics/external {\"commonjs\":\"playkit-js\",\"commonjs2\":\"playkit-js\",\"amd\":\"playkit-js\",\"root\":[\"playkit\",\"core\"]}","./ott-analytics/./index.js","./ott-analytics/./ott-analytics.js","./ott-analytics/../node_modules/playkit-js-providers/dist/playkit-bookmark-service.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","NAME","VERSION","undefined","_playkitJs","_ottAnalytics","_ottAnalytics2","obj","default","registerPlugin","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","length","descriptor","key","protoProps","staticProps","_playkitBookmarkService","OttAnalyticsEvent","LOAD","PLAY","PAUSE","FINISH","FIRST_PLAY","BITRATE_CHANGE","HIT","OttAnalytics","_BasePlugin","player","config","_this","getPrototypeOf","serviceUrl","_initializeMembers","_registerListeners","_sendAnalytics","_eventParams","logger","warn","eventManager","destroy","_this2","PlayerEvent","Event","listen","_onFirstPlay","_onPlay","_onPause","ENDED","_onEnded","SEEKED","_onSeeked","VIDEO_TRACK_CHANGED","_onVideoTrackChanged","CHANGE_SOURCE_STARTED","_onChangeSourceStarted","SOURCE_SELECTED","event","_onSourceSelected","source","payload","selectedSource","parts","id","split","_fileId","parseInt","e","error","_isPlaying","_startMediaHitInterval","_didFirstPlay","_clearMediaHitInterval","_playFromContinue","action","params","_this3","playerData","averageBitrate","totalBitrate","currentBitrate","fileId","bookMark","type","mediaType","mediaId","position","OTTBookmarkService","add","ks","doHttpRequest","then","data","_concurrentFlag","debug","err","_this4","_mediaHitInterval","setInterval","mediaHitInterval","clearInterval","startTime","_continueTime","entryId","currentTime","BasePlugin","defaultConfig","t","r","Symbol","iterator","a","arguments","Map","headers","service","url","Error","XMLHttpRequest","Promise","onreadystatechange","readyState","status","JSON","parse","responseText","code","message","open","method","forEach","setRequestHeader","send","OTTConfiguration","serviceParams","apiVersion","u","assign","clone","hasError","objectType","MultiRequestResult","f","v","y","Array","apply","concat","requests","push","stringify","_logger","b","results","success","result","isArray","slice","keys","getLevel","setLevel","setLogLevel","getLogLevel","LogLevel","DEBUG","INFO","TIME","WARN","ERROR","OFF","useDefaults","defaultLevel","context","filterLevel","log","info","enabledFor","invoke","time","timeEnd","level","setHandler","createDefaultHandler","formatter","unshift","Function","console","Date","getTime","set","getUrl","bookmark","RequestBuilder","partnerId"],"mappings":"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","file":"playkit-ott-analytics.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"playkit-js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"playkit-js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ottanalytics\"] = factory(require(\"playkit-js\"));\n\telse\n\t\troot[\"playkit\"] = root[\"playkit\"] || {}, root[\"playkit\"][\"ottanalytics\"] = factory(root[\"playkit\"][\"core\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"playkit-js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"playkit-js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ottanalytics\"] = factory(require(\"playkit-js\"));\n\telse\n\t\troot[\"playkit\"] = root[\"playkit\"] || {}, root[\"playkit\"][\"ottanalytics\"] = factory(root[\"playkit\"][\"core\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NAME = exports.VERSION = undefined;\n\nvar _playkitJs = __webpack_require__(0);\n\nvar _ottAnalytics = __webpack_require__(2);\n\nvar _ottAnalytics2 = _interopRequireDefault(_ottAnalytics);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _ottAnalytics2.default;\nexports.VERSION = \"0.1.2\";\nexports.NAME = \"playkit-js-ott-analytics\";\n\n/**\n * The plugin name.\n * @type {string}\n * @const\n */\n\nvar pluginName = \"ottAnalytics\";\n\n(0, _playkitJs.registerPlugin)(pluginName, _ottAnalytics2.default);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _playkitJs = __webpack_require__(0);\n\nvar _playkitBookmarkService = __webpack_require__(3);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MEDIA_TYPE = 'MEDIA';\nvar CONCURRENT = 'Concurrent';\nvar OttAnalyticsEvent = {\n  LOAD: 'LOAD',\n  PLAY: 'PLAY',\n  PAUSE: 'PAUSE',\n  FINISH: 'FINISH',\n  FIRST_PLAY: 'FIRST_PLAY',\n  BITRATE_CHANGE: 'BITRATE_CHANGE',\n  HIT: 'HIT'\n};\n\nvar OttAnalytics = function (_BasePlugin) {\n  _inherits(OttAnalytics, _BasePlugin);\n\n  _createClass(OttAnalytics, null, [{\n    key: 'isValid',\n\n\n    /**\n     * Whether the ima plugin is valid.\n     * @static\n     * @override\n     * @public\n     */\n    value: function isValid() {\n      return true;\n    }\n    /**\n     * The default configuration of the plugin.\n     * @type {Object}\n     * @static\n     */\n\n  }]);\n\n  /**\n   * @constructor\n   * @param {string} name - The plugin name.\n   * @param {Player} player - The player instance.\n   * @param {Object} config - The plugin config.\n   */\n  function OttAnalytics(name, player, config) {\n    _classCallCheck(this, OttAnalytics);\n\n    var _this = _possibleConstructorReturn(this, (OttAnalytics.__proto__ || Object.getPrototypeOf(OttAnalytics)).call(this, name, player, config));\n\n    if (_this.config.serviceUrl) {\n      _this._initializeMembers();\n      _this._registerListeners();\n      _this._sendAnalytics(OttAnalyticsEvent.LOAD, _this._eventParams);\n    } else {\n      _this.logger.warn('No service URL provided. Tracking aborted');\n    }\n    return _this;\n  }\n\n  /**\n   * Destroys the plugin.\n   * @override\n   * @public\n   * @returns {void}\n   */\n\n\n  _createClass(OttAnalytics, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.eventManager.destroy();\n    }\n\n    /**\n     * Registers the player listeners.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_registerListeners',\n    value: function _registerListeners() {\n      var _this2 = this;\n\n      var PlayerEvent = this.player.Event;\n      this.eventManager.listen(this.player, PlayerEvent.FIRST_PLAY, function () {\n        return _this2._onFirstPlay();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.PLAY, function () {\n        return _this2._onPlay();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.PAUSE, function () {\n        return _this2._onPause();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.ENDED, function () {\n        return _this2._onEnded();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.SEEKED, function () {\n        return _this2._onSeeked();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.VIDEO_TRACK_CHANGED, function () {\n        return _this2._onVideoTrackChanged();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.CHANGE_SOURCE_STARTED, function () {\n        return _this2._onChangeSourceStarted();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.SOURCE_SELECTED, function (event) {\n        return _this2._onSourceSelected(event);\n      });\n    }\n\n    /**\n     * The source selected event listener.\n     * @param {Object} event - The event object.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onSourceSelected',\n    value: function _onSourceSelected(event) {\n      try {\n        var source = event.payload.selectedSource[0];\n        var parts = source.id.split(',');\n        var id = parts[0];\n        this._fileId = parseInt(id);\n      } catch (e) {\n        this.logger.error(e);\n      }\n    }\n\n    /**\n     * The play event listener.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onPlay',\n    value: function _onPlay() {\n      this._isPlaying = true;\n      this._startMediaHitInterval();\n      this._sendAnalytics(OttAnalyticsEvent.PLAY, this._eventParams);\n    }\n\n    /**\n     * The pause event listener.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onPause',\n    value: function _onPause() {\n      this._isPlaying = false;\n      if (this._didFirstPlay) {\n        this._sendAnalytics(OttAnalyticsEvent.PAUSE, this._eventParams);\n      }\n    }\n\n    /**\n     * The ended event listener.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onEnded',\n    value: function _onEnded() {\n      this._isPlaying = false;\n      this._clearMediaHitInterval();\n      this._sendAnalytics(OttAnalyticsEvent.FINISH, this._eventParams);\n    }\n\n    /**\n     * The first play event listener.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onFirstPlay',\n    value: function _onFirstPlay() {\n      this._didFirstPlay = true;\n      this._sendAnalytics(OttAnalyticsEvent.FIRST_PLAY, this._eventParams);\n    }\n\n    /**\n     * Sets _playFromContinue to false on seeked event.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onSeeked',\n    value: function _onSeeked() {\n      this._playFromContinue = false;\n    }\n\n    /**\n     * Send BITRATE_CHANGE analytic.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onVideoTrackChanged',\n    value: function _onVideoTrackChanged() {\n      this._sendAnalytics(OttAnalyticsEvent.BITRATE_CHANGE, this._eventParams);\n    }\n\n    /**\n     * Sets _didFirstPlay to false on media change.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onChangeSourceStarted',\n    value: function _onChangeSourceStarted() {\n      this._didFirstPlay = false;\n    }\n\n    /**\n     * Get the player params which relevant to analytics request.\n     * @private\n     * @returns {Object} - The player params\n     */\n\n  }, {\n    key: '_sendAnalytics',\n\n\n    /**\n     * Send analytics.\n     * @param {string} action - The action\n     * @param {string} params - The params\n     * @private\n     * @returns {void}\n     */\n    value: function _sendAnalytics(action, params) {\n      var _this3 = this;\n\n      var playerData = {\n        action: action,\n        averageBitrate: 0, totalBitrate: 0,\n        currentBitrate: 0, fileId: params.fileId\n      };\n      var bookMark = {\n        type: params.mediaType,\n        id: params.mediaId,\n        position: params.position,\n        playerData: playerData\n      };\n      var request = _playkitBookmarkService.OTTBookmarkService.add(this.config.serviceUrl, this.config.ks, bookMark);\n      request.doHttpRequest().then(function (data) {\n        if (data === CONCURRENT) {\n          _this3._concurrentFlag = true;\n        } else {\n          _this3.logger.debug('Analytics event sent', bookMark);\n        }\n      }, function (err) {\n        _this3.logger.error('Failed to send analytics event', bookMark, err);\n      });\n    }\n\n    /**\n     * Starts the media hit interval.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_startMediaHitInterval',\n    value: function _startMediaHitInterval() {\n      var _this4 = this;\n\n      this._clearMediaHitInterval();\n      this._mediaHitInterval = setInterval(function () {\n        if (_this4._isPlaying) {\n          _this4._playFromContinue = false;\n          if (_this4._concurrentFlag || _this4._eventParams.position === 0) {\n            return;\n          } else {\n            _this4._sendAnalytics(OttAnalyticsEvent.HIT, _this4._eventParams);\n          }\n        }\n      }, this.config.mediaHitInterval * 1000);\n    }\n\n    /**\n     * Clears the media hit interval.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_clearMediaHitInterval',\n    value: function _clearMediaHitInterval() {\n      clearInterval(this._mediaHitInterval);\n      this._mediaHitInterval = 0;\n    }\n\n    /**\n     * Initializes the class members.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_initializeMembers',\n    value: function _initializeMembers() {\n      this._isPlaying = false;\n      this._concurrentFlag = false;\n      this._fileId = 0;\n      this._didFirstPlay = false;\n      this._mediaHitInterval = 0;\n      this._isPlaying = false;\n      if (this.config.startTime) {\n        this._continueTime = this.config.startTime;\n        this._playFromContinue = true;\n      } else {\n        this._continueTime = 0;\n        this._playFromContinue = false;\n      }\n    }\n  }, {\n    key: '_eventParams',\n    get: function get() {\n      return {\n        mediaType: MEDIA_TYPE,\n        fileId: this._fileId,\n        mediaId: this.config.entryId,\n        position: this.player.currentTime\n      };\n    }\n  }]);\n\n  return OttAnalytics;\n}(_playkitJs.BasePlugin);\n\nOttAnalytics.defaultConfig = {\n  mediaHitInterval: 30,\n  startTime: null\n};\nexports.default = OttAnalytics;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(e,t){ true?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.bookmark=t():(e.playkit=e.playkit||{},e.playkit.services=e.playkit.services||{},e.playkit.services.bookmark=t())}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=10)}([function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;r(this,e),this.headers=t}return i(e,[{key:\"getUrl\",value:function(e){return e+\"/service/\"+this.service+(this.action?\"/action/\"+this.action:\"\")}},{key:\"doHttpRequest\",value:function(){var e=this;if(!this.url)throw new Error(\"serviceUrl is mandatory for request builder\");var t=new XMLHttpRequest;return new Promise(function(n,r){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var e=JSON.parse(t.responseText);e&&\"object\"===(void 0===e?\"undefined\":o(e))&&e.code&&e.message?r(e):n(e)}else r(t.responseText)},t.open(e.method,e.url),e.headers.forEach(function(e,n){t.setRequestHeader(n,e)}),t.send(e.params)})}}]),e}();t.default=a},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0}),t.OTTConfiguration=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),a={serviceParams:{apiVersion:\"4.7.1\"}},u=function(){function e(){r(this,e)}return o(e,null,[{key:\"set\",value:function(e){e&&Object.assign(a,e)}},{key:\"get\",value:function(){return(0,i.clone)(a)}}]),e}();t.default=u,t.OTTConfiguration=u},,function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function e(t){r(this,e),this.hasError=!1,\"KalturaAPIException\"===t.objectType?(this.hasError=!0,this.error=new i(t.code,t.message)):t.error&&\"KalturaAPIException\"===t.error.objectType?(this.hasError=!0,this.error=new i(t.error.code,t.error.message)):this.data=t};t.default=o;var i=function e(t,n){r(this,e),this.code=t,this.message=n}},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function a(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function u(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.MultiRequestResult=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(6),p=r(f),v=n(3),d=r(v),y=function(e){function t(){var e,n,r,o;i(this,t);for(var u=arguments.length,s=Array(u),c=0;c<u;c++)s[c]=arguments[c];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.requests=[],o=n,a(r,o)}return u(t,e),s(t,[{key:\"add\",value:function(e){this.requests.push(e);var t={},n={service:e.service,action:e.action};return Object.assign(t,o({},this.requests.length,Object.assign(n,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:\"execute\",value:function(){var e=this;try{this.params=JSON.stringify(this.params)}catch(e){t._logger.error(\"\"+e.message)}return new Promise(function(t,n){e.doHttpRequest().then(function(e){t(new b(e))},function(e){n(\"Error on multiRequest execution, error <\"+e+\">.\")})})}}]),t}(l.default);y._logger=(0,p.default)(\"MultiRequestBuilder\"),t.default=y;var b=t.MultiRequestResult=function e(t){var n=this;i(this,e),this.results=[],this.success=!0,(t.result?t.result:t).forEach(function(t){var r=new d.default(t);if(n.results.push(r),r.hasError)return e._logger.error(\"Service returned an error with error code: \"+r.error.code+\" and message: \"+r.error.message+\".\"),void(n.success=!1)})};b._logger=(0,p.default)(\"MultiRequestResult\")},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=function e(t){var n=void 0;return Array.isArray(t)?(n=t.length>0?t.slice(0):[],n.forEach(function(t,o){(\"object\"===(void 0===t?\"undefined\":r(t))&&t!=={}||Array.isArray(t)&&t.length>0)&&(n[o]=e(t))})):\"object\"===(void 0===t?\"undefined\":r(t))?(n=Object.assign({},t),Object.keys(n).forEach(function(t){(\"object\"===r(n[t])&&n[t]!=={}||Array.isArray(n[t])&&n[t].length>0)&&(n[t]=e(n[t]))})):n=t,n};t.clone=o},function(e,t,n){\"use strict\";function r(e){return e?u.get(e):u}function o(e){return r(e).getLevel()}function i(e,t){r(t).setLevel(e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var a=n(7),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s={DEBUG:u.DEBUG,INFO:u.INFO,TIME:u.TIME,WARN:u.WARN,ERROR:u.ERROR,OFF:u.OFF};u.useDefaults({defaultLevel:u.ERROR}),t.default=r,t.LogLevel=s,t.getLogLevel=o,t.setLogLevel=i},function(e,t,n){var r,o;/*!\n * js-logger - http://github.com/jonnyreeves/js-logger\n * Jonny Reeves, http://jonnyreeves.co.uk/\n * js-logger may be freely distributed under the MIT license.\n */\n!function(i){\"use strict\";var a={};a.VERSION=\"1.4.1\";var u,s={},c=function(e,t){return function(){return t.apply(e,arguments)}},l=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};a.DEBUG=f(1,\"DEBUG\"),a.INFO=f(2,\"INFO\"),a.TIME=f(3,\"TIME\"),a.WARN=f(4,\"WARN\"),a.ERROR=f(8,\"ERROR\"),a.OFF=f(99,\"OFF\");var p=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};p.prototype={setLevel:function(e){e&&\"value\"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(a.DEBUG,arguments)},info:function(){this.invoke(a.INFO,arguments)},warn:function(){this.invoke(a.WARN,arguments)},error:function(){this.invoke(a.ERROR,arguments)},time:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,\"start\"])},timeEnd:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,\"end\"])},invoke:function(e,t){u&&this.enabledFor(e)&&u(t,l({level:e},this.context))}};var v=new p({filterLevel:a.OFF});!function(){var e=a;e.enabledFor=c(v,v.enabledFor),e.debug=c(v,v.debug),e.time=c(v,v.time),e.timeEnd=c(v,v.timeEnd),e.info=c(v,v.info),e.warn=c(v,v.warn),e.error=c(v,v.error),e.log=e.info}(),a.setHandler=function(e){u=e},a.setLevel=function(e){v.setLevel(e);for(var t in s)s.hasOwnProperty(t)&&s[t].setLevel(e)},a.getLevel=function(){return v.getLevel()},a.get=function(e){return s[e]||(s[e]=new p(l({name:e},v.context)))},a.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift(\"[\"+t.name+\"]\")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return\"undefined\"==typeof console?function(){}:function(r,o){r=Array.prototype.slice.call(r);var i,u=console.log;o.level===a.TIME?(i=(o.name?\"[\"+o.name+\"] \":\"\")+r[0],\"start\"===r[1]?console.time?console.time(i):t[i]=(new Date).getTime():console.timeEnd?console.timeEnd(i):n(u,[i+\": \"+((new Date).getTime()-t[i])+\"ms\"])):(o.level===a.WARN&&console.warn?u=console.warn:o.level===a.ERROR&&console.error?u=console.error:o.level===a.INFO&&console.info?u=console.info:o.level===a.DEBUG&&console.debug&&(u=console.debug),e.formatter(r,o),n(u,r))}},a.useDefaults=function(e){a.setLevel(e&&e.defaultLevel||a.DEBUG),a.setHandler(a.createDefaultHandler(e))},r=a,void 0!==(o=\"function\"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}()},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function a(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),c=r(s),l=n(0),f=r(l),p=n(1),v=r(p),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,null,[{key:\"add\",value:function(e,t,n){var r=new Map;r.set(\"Content-Type\",\"application/json\");var o=new f.default(r);o.service=\"bookmark\",o.action=\"add\",o.method=\"POST\",o.url=o.getUrl(e);var i={objectType:\"KalturaBookmarkPlayerData\",action:n.playerData.action,averageBitrate:n.playerData.averageBitrate,totalBitrate:n.playerData.totalBitrate,currentBitrate:n.playerData.currentBitrate,fileId:n.playerData.fileId},a={objectType:\"KalturaBookmark\",type:n.type,id:n.id,position:n.position,playerData:i},u=v.default.get(),s=u.serviceParams;return Object.assign(s,{bookmark:a,ks:t}),o.params=JSON.stringify(s),o}}]),t}(c.default);t.default=d},,function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.VERSION=t.NAME=t.RequestBuilder=t.OTTConfiguration=t.OTTBookmarkService=void 0;var o=n(0),i=r(o),a=n(1),u=r(a),s=n(8),c=r(s);t.OTTBookmarkService=c.default,t.OTTConfiguration=u.default,t.RequestBuilder=i.default,t.NAME=\"playkit-js-providers-bookmark-service\",t.VERSION=\"2.3.2\"},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),u=r(a),s=n(1),c=r(s),l=function(){function e(){o(this,e)}return i(e,null,[{key:\"getMultiRequest\",value:function(e,t){var n=c.default.get(),r=n.serviceParams;e&&Object.assign(r,{ks:e}),t&&Object.assign(r,{partnerId:t});var o=new Map;o.set(\"Content-Type\",\"application/json\");var i=new u.default(o);return i.method=\"POST\",i.service=\"multirequest\",i.url=i.getUrl(n.serviceUrl),i.params=r,i}}]),e}();t.default=l}])});\n//# sourceMappingURL=playkit-bookmark-service.js.map\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// playkit-ott-analytics.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 248363df0658a06a0bf2","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"playkit-js\",\"commonjs2\":\"playkit-js\",\"amd\":\"playkit-js\",\"root\":[\"playkit\",\"core\"]}\n// module id = 0\n// module chunks = 0","// @flow\nimport {registerPlugin} from 'playkit-js'\nimport OttAnalytics from './ott-analytics'\n\ndeclare var __VERSION__: string;\ndeclare var __NAME__: string;\n\nexport default OttAnalytics;\nexport {__VERSION__ as VERSION, __NAME__ as NAME};\n\n/**\n * The plugin name.\n * @type {string}\n * @const\n */\nconst pluginName: string = \"ottAnalytics\";\n\nregisterPlugin(pluginName, OttAnalytics);\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","//@flow\nimport {BasePlugin} from 'playkit-js'\nimport {OTTBookmarkService, RequestBuilder} from 'playkit-js-providers/dist/playkit-bookmark-service'\n\ntype OttAnalyticsEventType = { [event: string]: string };\nconst MEDIA_TYPE = 'MEDIA';\nconst CONCURRENT = 'Concurrent';\nconst OttAnalyticsEvent: OttAnalyticsEventType = {\n  LOAD: 'LOAD',\n  PLAY: 'PLAY',\n  PAUSE: 'PAUSE',\n  FINISH: 'FINISH',\n  FIRST_PLAY: 'FIRST_PLAY',\n  BITRATE_CHANGE: 'BITRATE_CHANGE',\n  HIT: 'HIT'\n};\n\nexport default class OttAnalytics extends BasePlugin {\n  /**\n   * The default configuration of the plugin.\n   * @type {Object}\n   * @static\n   */\n  static defaultConfig: Object = {\n    mediaHitInterval: 30,\n    startTime: null\n  };\n\n  /**\n   * Whether the ima plugin is valid.\n   * @static\n   * @override\n   * @public\n   */\n  static isValid(): boolean {\n    return true;\n  }\n\n  _isPlaying: boolean;\n  _concurrentFlag: boolean;\n  _fileId: number;\n  _didFirstPlay: boolean;\n  _mediaHitInterval: number;\n  _continueTime: number;\n  _playFromContinue: boolean;\n  _isPlaying: boolean;\n\n  /**\n   * @constructor\n   * @param {string} name - The plugin name.\n   * @param {Player} player - The player instance.\n   * @param {Object} config - The plugin config.\n   */\n  constructor(name: string, player: Player, config: Object) {\n    super(name, player, config);\n    if (this.config.serviceUrl) {\n      this._initializeMembers();\n      this._registerListeners();\n      this._sendAnalytics(OttAnalyticsEvent.LOAD, this._eventParams);\n    } else {\n      this.logger.warn('No service URL provided. Tracking aborted');\n    }\n  }\n\n  /**\n   * Destroys the plugin.\n   * @override\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.eventManager.destroy();\n  }\n\n  /**\n   * Registers the player listeners.\n   * @private\n   * @returns {void}\n   */\n  _registerListeners(): void {\n    const PlayerEvent = this.player.Event;\n    this.eventManager.listen(this.player, PlayerEvent.FIRST_PLAY, () => this._onFirstPlay());\n    this.eventManager.listen(this.player, PlayerEvent.PLAY, () => this._onPlay());\n    this.eventManager.listen(this.player, PlayerEvent.PAUSE, () => this._onPause());\n    this.eventManager.listen(this.player, PlayerEvent.ENDED, () => this._onEnded());\n    this.eventManager.listen(this.player, PlayerEvent.SEEKED, () => this._onSeeked());\n    this.eventManager.listen(this.player, PlayerEvent.VIDEO_TRACK_CHANGED, () => this._onVideoTrackChanged());\n    this.eventManager.listen(this.player, PlayerEvent.CHANGE_SOURCE_STARTED, () => this._onChangeSourceStarted());\n    this.eventManager.listen(this.player, PlayerEvent.SOURCE_SELECTED, event => this._onSourceSelected(event));\n  }\n\n  /**\n   * The source selected event listener.\n   * @param {Object} event - The event object.\n   * @private\n   * @returns {void}\n   */\n  _onSourceSelected(event: Object): void {\n    try {\n      const source = event.payload.selectedSource[0];\n      const parts = source.id.split(',');\n      const id = parts[0];\n      this._fileId = parseInt(id);\n    } catch (e) {\n      this.logger.error(e);\n    }\n  }\n\n  /**\n   * The play event listener.\n   * @private\n   * @returns {void}\n   */\n  _onPlay(): void {\n    this._isPlaying = true;\n    this._startMediaHitInterval();\n    this._sendAnalytics(OttAnalyticsEvent.PLAY, this._eventParams);\n  }\n\n  /**\n   * The pause event listener.\n   * @private\n   * @returns {void}\n   */\n  _onPause(): void {\n    this._isPlaying = false;\n    if (this._didFirstPlay) {\n      this._sendAnalytics(OttAnalyticsEvent.PAUSE, this._eventParams);\n    }\n  }\n\n  /**\n   * The ended event listener.\n   * @private\n   * @returns {void}\n   */\n  _onEnded(): void {\n    this._isPlaying = false;\n    this._clearMediaHitInterval();\n    this._sendAnalytics(OttAnalyticsEvent.FINISH, this._eventParams);\n  }\n\n  /**\n   * The first play event listener.\n   * @private\n   * @returns {void}\n   */\n  _onFirstPlay(): void {\n    this._didFirstPlay = true;\n    this._sendAnalytics(OttAnalyticsEvent.FIRST_PLAY, this._eventParams);\n  }\n\n  /**\n   * Sets _playFromContinue to false on seeked event.\n   * @private\n   * @returns {void}\n   */\n  _onSeeked(): void {\n    this._playFromContinue = false;\n  }\n\n  /**\n   * Send BITRATE_CHANGE analytic.\n   * @private\n   * @returns {void}\n   */\n  _onVideoTrackChanged(): void {\n    this._sendAnalytics(OttAnalyticsEvent.BITRATE_CHANGE, this._eventParams);\n  }\n\n  /**\n   * Sets _didFirstPlay to false on media change.\n   * @private\n   * @returns {void}\n   */\n  _onChangeSourceStarted(): void {\n    this._didFirstPlay = false;\n  }\n\n  /**\n   * Get the player params which relevant to analytics request.\n   * @private\n   * @returns {Object} - The player params\n   */\n  get _eventParams(): Object {\n    return {\n      mediaType: MEDIA_TYPE,\n      fileId: this._fileId,\n      mediaId: this.config.entryId,\n      position: this.player.currentTime\n    };\n  }\n\n  /**\n   * Send analytics.\n   * @param {string} action - The action\n   * @param {string} params - The params\n   * @private\n   * @returns {void}\n   */\n  _sendAnalytics(action: string, params: Object): void {\n    const playerData: Object = {\n      action: action,\n      averageBitrate: 0, totalBitrate: 0,\n      currentBitrate: 0, fileId: params.fileId,\n    };\n    const bookMark: Object = {\n      type: params.mediaType,\n      id: params.mediaId,\n      position: params.position,\n      playerData: playerData\n    };\n    const request: RequestBuilder = OTTBookmarkService.add(this.config.serviceUrl, this.config.ks, bookMark);\n    request.doHttpRequest()\n      .then((data) => {\n        if (data === CONCURRENT) {\n          this._concurrentFlag = true;\n        } else {\n          this.logger.debug('Analytics event sent', bookMark);\n        }\n      }, err => {\n        this.logger.error('Failed to send analytics event', bookMark, err);\n      });\n  }\n\n  /**\n   * Starts the media hit interval.\n   * @private\n   * @returns {void}\n   */\n  _startMediaHitInterval(): void {\n    this._clearMediaHitInterval();\n    this._mediaHitInterval = setInterval(() => {\n      if (this._isPlaying) {\n        this._playFromContinue = false;\n        if (this._concurrentFlag || this._eventParams.position === 0) {\n          return;\n        } else {\n          this._sendAnalytics(OttAnalyticsEvent.HIT, this._eventParams);\n        }\n      }\n    }, this.config.mediaHitInterval * 1000);\n  }\n\n  /**\n   * Clears the media hit interval.\n   * @private\n   * @returns {void}\n   */\n  _clearMediaHitInterval(): void {\n    clearInterval(this._mediaHitInterval);\n    this._mediaHitInterval = 0;\n  }\n\n  /**\n   * Initializes the class members.\n   * @private\n   * @returns {void}\n   */\n  _initializeMembers(): void {\n    this._isPlaying = false;\n    this._concurrentFlag = false;\n    this._fileId = 0;\n    this._didFirstPlay = false;\n    this._mediaHitInterval = 0;\n    this._isPlaying = false;\n    if (this.config.startTime) {\n      this._continueTime = this.config.startTime;\n      this._playFromContinue = true;\n    } else {\n      this._continueTime = 0;\n      this._playFromContinue = false;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ott-analytics.js","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.bookmark=t():(e.playkit=e.playkit||{},e.playkit.services=e.playkit.services||{},e.playkit.services.bookmark=t())}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=10)}([function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;r(this,e),this.headers=t}return i(e,[{key:\"getUrl\",value:function(e){return e+\"/service/\"+this.service+(this.action?\"/action/\"+this.action:\"\")}},{key:\"doHttpRequest\",value:function(){var e=this;if(!this.url)throw new Error(\"serviceUrl is mandatory for request builder\");var t=new XMLHttpRequest;return new Promise(function(n,r){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var e=JSON.parse(t.responseText);e&&\"object\"===(void 0===e?\"undefined\":o(e))&&e.code&&e.message?r(e):n(e)}else r(t.responseText)},t.open(e.method,e.url),e.headers.forEach(function(e,n){t.setRequestHeader(n,e)}),t.send(e.params)})}}]),e}();t.default=a},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0}),t.OTTConfiguration=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),a={serviceParams:{apiVersion:\"4.7.1\"}},u=function(){function e(){r(this,e)}return o(e,null,[{key:\"set\",value:function(e){e&&Object.assign(a,e)}},{key:\"get\",value:function(){return(0,i.clone)(a)}}]),e}();t.default=u,t.OTTConfiguration=u},,function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function e(t){r(this,e),this.hasError=!1,\"KalturaAPIException\"===t.objectType?(this.hasError=!0,this.error=new i(t.code,t.message)):t.error&&\"KalturaAPIException\"===t.error.objectType?(this.hasError=!0,this.error=new i(t.error.code,t.error.message)):this.data=t};t.default=o;var i=function e(t,n){r(this,e),this.code=t,this.message=n}},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function a(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function u(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.MultiRequestResult=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(6),p=r(f),v=n(3),d=r(v),y=function(e){function t(){var e,n,r,o;i(this,t);for(var u=arguments.length,s=Array(u),c=0;c<u;c++)s[c]=arguments[c];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.requests=[],o=n,a(r,o)}return u(t,e),s(t,[{key:\"add\",value:function(e){this.requests.push(e);var t={},n={service:e.service,action:e.action};return Object.assign(t,o({},this.requests.length,Object.assign(n,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:\"execute\",value:function(){var e=this;try{this.params=JSON.stringify(this.params)}catch(e){t._logger.error(\"\"+e.message)}return new Promise(function(t,n){e.doHttpRequest().then(function(e){t(new b(e))},function(e){n(\"Error on multiRequest execution, error <\"+e+\">.\")})})}}]),t}(l.default);y._logger=(0,p.default)(\"MultiRequestBuilder\"),t.default=y;var b=t.MultiRequestResult=function e(t){var n=this;i(this,e),this.results=[],this.success=!0,(t.result?t.result:t).forEach(function(t){var r=new d.default(t);if(n.results.push(r),r.hasError)return e._logger.error(\"Service returned an error with error code: \"+r.error.code+\" and message: \"+r.error.message+\".\"),void(n.success=!1)})};b._logger=(0,p.default)(\"MultiRequestResult\")},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=function e(t){var n=void 0;return Array.isArray(t)?(n=t.length>0?t.slice(0):[],n.forEach(function(t,o){(\"object\"===(void 0===t?\"undefined\":r(t))&&t!=={}||Array.isArray(t)&&t.length>0)&&(n[o]=e(t))})):\"object\"===(void 0===t?\"undefined\":r(t))?(n=Object.assign({},t),Object.keys(n).forEach(function(t){(\"object\"===r(n[t])&&n[t]!=={}||Array.isArray(n[t])&&n[t].length>0)&&(n[t]=e(n[t]))})):n=t,n};t.clone=o},function(e,t,n){\"use strict\";function r(e){return e?u.get(e):u}function o(e){return r(e).getLevel()}function i(e,t){r(t).setLevel(e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var a=n(7),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s={DEBUG:u.DEBUG,INFO:u.INFO,TIME:u.TIME,WARN:u.WARN,ERROR:u.ERROR,OFF:u.OFF};u.useDefaults({defaultLevel:u.ERROR}),t.default=r,t.LogLevel=s,t.getLogLevel=o,t.setLogLevel=i},function(e,t,n){var r,o;/*!\n * js-logger - http://github.com/jonnyreeves/js-logger\n * Jonny Reeves, http://jonnyreeves.co.uk/\n * js-logger may be freely distributed under the MIT license.\n */\n!function(i){\"use strict\";var a={};a.VERSION=\"1.4.1\";var u,s={},c=function(e,t){return function(){return t.apply(e,arguments)}},l=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};a.DEBUG=f(1,\"DEBUG\"),a.INFO=f(2,\"INFO\"),a.TIME=f(3,\"TIME\"),a.WARN=f(4,\"WARN\"),a.ERROR=f(8,\"ERROR\"),a.OFF=f(99,\"OFF\");var p=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};p.prototype={setLevel:function(e){e&&\"value\"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(a.DEBUG,arguments)},info:function(){this.invoke(a.INFO,arguments)},warn:function(){this.invoke(a.WARN,arguments)},error:function(){this.invoke(a.ERROR,arguments)},time:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,\"start\"])},timeEnd:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,\"end\"])},invoke:function(e,t){u&&this.enabledFor(e)&&u(t,l({level:e},this.context))}};var v=new p({filterLevel:a.OFF});!function(){var e=a;e.enabledFor=c(v,v.enabledFor),e.debug=c(v,v.debug),e.time=c(v,v.time),e.timeEnd=c(v,v.timeEnd),e.info=c(v,v.info),e.warn=c(v,v.warn),e.error=c(v,v.error),e.log=e.info}(),a.setHandler=function(e){u=e},a.setLevel=function(e){v.setLevel(e);for(var t in s)s.hasOwnProperty(t)&&s[t].setLevel(e)},a.getLevel=function(){return v.getLevel()},a.get=function(e){return s[e]||(s[e]=new p(l({name:e},v.context)))},a.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift(\"[\"+t.name+\"]\")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return\"undefined\"==typeof console?function(){}:function(r,o){r=Array.prototype.slice.call(r);var i,u=console.log;o.level===a.TIME?(i=(o.name?\"[\"+o.name+\"] \":\"\")+r[0],\"start\"===r[1]?console.time?console.time(i):t[i]=(new Date).getTime():console.timeEnd?console.timeEnd(i):n(u,[i+\": \"+((new Date).getTime()-t[i])+\"ms\"])):(o.level===a.WARN&&console.warn?u=console.warn:o.level===a.ERROR&&console.error?u=console.error:o.level===a.INFO&&console.info?u=console.info:o.level===a.DEBUG&&console.debug&&(u=console.debug),e.formatter(r,o),n(u,r))}},a.useDefaults=function(e){a.setLevel(e&&e.defaultLevel||a.DEBUG),a.setHandler(a.createDefaultHandler(e))},r=a,void 0!==(o=\"function\"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}()},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function a(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),c=r(s),l=n(0),f=r(l),p=n(1),v=r(p),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,null,[{key:\"add\",value:function(e,t,n){var r=new Map;r.set(\"Content-Type\",\"application/json\");var o=new f.default(r);o.service=\"bookmark\",o.action=\"add\",o.method=\"POST\",o.url=o.getUrl(e);var i={objectType:\"KalturaBookmarkPlayerData\",action:n.playerData.action,averageBitrate:n.playerData.averageBitrate,totalBitrate:n.playerData.totalBitrate,currentBitrate:n.playerData.currentBitrate,fileId:n.playerData.fileId},a={objectType:\"KalturaBookmark\",type:n.type,id:n.id,position:n.position,playerData:i},u=v.default.get(),s=u.serviceParams;return Object.assign(s,{bookmark:a,ks:t}),o.params=JSON.stringify(s),o}}]),t}(c.default);t.default=d},,function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.VERSION=t.NAME=t.RequestBuilder=t.OTTConfiguration=t.OTTBookmarkService=void 0;var o=n(0),i=r(o),a=n(1),u=r(a),s=n(8),c=r(s);t.OTTBookmarkService=c.default,t.OTTConfiguration=u.default,t.RequestBuilder=i.default,t.NAME=\"playkit-js-providers-bookmark-service\",t.VERSION=\"2.3.2\"},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),u=r(a),s=n(1),c=r(s),l=function(){function e(){o(this,e)}return i(e,null,[{key:\"getMultiRequest\",value:function(e,t){var n=c.default.get(),r=n.serviceParams;e&&Object.assign(r,{ks:e}),t&&Object.assign(r,{partnerId:t});var o=new Map;o.set(\"Content-Type\",\"application/json\");var i=new u.default(o);return i.method=\"POST\",i.service=\"multirequest\",i.url=i.getUrl(n.serviceUrl),i.params=r,i}}]),e}();t.default=l}])});\n//# sourceMappingURL=playkit-bookmark-service.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/playkit-js-providers/dist/playkit-bookmark-service.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}