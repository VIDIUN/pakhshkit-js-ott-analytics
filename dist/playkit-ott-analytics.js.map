{"version":3,"sources":["./ott-analytics/webpack/universalModuleDefinition","./ott-analytics/playkit-ott-analytics.js","./ott-analytics/webpack/bootstrap 368758d997ccaf372652","./ott-analytics/external {\"commonjs\":\"playkit-js\",\"commonjs2\":\"playkit-js\",\"amd\":\"playkit-js\",\"root\":[\"playkit\",\"core\"]}","./ott-analytics/./index.js","./ott-analytics/./ott-analytics.js","./ott-analytics/../node_modules/playkit-js-providers/dist/playkit-bookmark-service.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","NAME","VERSION","undefined","_playkitJs","_ottAnalytics","_ottAnalytics2","obj","default","registerPlugin","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","length","descriptor","key","protoProps","staticProps","_playkitBookmarkService","OttAnalyticsEvent","LOAD","PLAY","PAUSE","FINISH","FIRST_PLAY","BITRATE_CHANGE","HIT","OttAnalytics","_BasePlugin","player","config","_this","getPrototypeOf","_isPlaying","_concurrentFlag","_fileId","_didFirstPlay","_mediaHitInterval","serviceUrl","_registerListeners","logger","warn","eventManager","destroy","_this2","PlayerEvent","Event","listen","_onFirstPlay","_onPlay","_onPause","ENDED","_onEnded","SEEKED","_onSeeked","VIDEO_TRACK_CHANGED","_onVideoTrackChanged","CHANGE_SOURCE_STARTED","_onChangeSourceStarted","SOURCE_SELECTED","event","_onSourceSelected","MEDIA_LOADED","_onMediaLoaded","source","payload","selectedSource","parts","id","split","parseInt","e","_sendAnalytics","_eventParams","_startMediaHitInterval","_clearMediaHitInterval","_playFromContinue","action","params","_this3","_validate","playerData","averageBitrate","totalBitrate","currentBitrate","fileId","bookMark","type","mediaType","mediaId","position","OTTBookmarkService","add","ks","doHttpRequest","then","data","debug","err","isMediaHit","disableMediaHit","info","disableMediaMark","entryId","_logMissingParam","missingParam","_this4","isLive","setInterval","mediaHitInterval","clearInterval","currentTime","BasePlugin","defaultConfig","startTime","t","r","Symbol","iterator","a","arguments","Map","headers","service","url","Error","XMLHttpRequest","Promise","onreadystatechange","readyState","status","JSON","parse","responseText","code","message","open","method","forEach","setRequestHeader","send","OTTConfiguration","serviceParams","apiVersion","u","assign","clone","hasError","objectType","error","MultiRequestResult","f","v","y","Array","apply","concat","requests","push","stringify","_logger","b","results","success","result","isArray","slice","keys","getLevel","setLevel","setLogLevel","getLogLevel","LogLevel","DEBUG","INFO","TIME","WARN","ERROR","OFF","useDefaults","defaultLevel","context","filterLevel","log","enabledFor","invoke","time","timeEnd","level","setHandler","createDefaultHandler","formatter","unshift","Function","console","Date","getTime","set","getUrl","bookmark","RequestBuilder","partnerId"],"mappings":"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","file":"playkit-ott-analytics.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"playkit-js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"playkit-js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ottanalytics\"] = factory(require(\"playkit-js\"));\n\telse\n\t\troot[\"playkit\"] = root[\"playkit\"] || {}, root[\"playkit\"][\"ottanalytics\"] = factory(root[\"playkit\"][\"core\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"playkit-js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"playkit-js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ottanalytics\"] = factory(require(\"playkit-js\"));\n\telse\n\t\troot[\"playkit\"] = root[\"playkit\"] || {}, root[\"playkit\"][\"ottanalytics\"] = factory(root[\"playkit\"][\"core\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NAME = exports.VERSION = undefined;\n\nvar _playkitJs = __webpack_require__(0);\n\nvar _ottAnalytics = __webpack_require__(2);\n\nvar _ottAnalytics2 = _interopRequireDefault(_ottAnalytics);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _ottAnalytics2.default;\nexports.VERSION = \"0.1.3\";\nexports.NAME = \"playkit-js-ott-analytics\";\n\n/**\n * The plugin name.\n * @type {string}\n * @const\n */\n\nvar pluginName = \"ottAnalytics\";\n\n(0, _playkitJs.registerPlugin)(pluginName, _ottAnalytics2.default);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _playkitJs = __webpack_require__(0);\n\nvar _playkitBookmarkService = __webpack_require__(3);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MEDIA_TYPE = 'MEDIA';\nvar CONCURRENT = 'Concurrent';\nvar OttAnalyticsEvent = {\n  LOAD: 'LOAD',\n  PLAY: 'PLAY',\n  PAUSE: 'PAUSE',\n  FINISH: 'FINISH',\n  FIRST_PLAY: 'FIRST_PLAY',\n  BITRATE_CHANGE: 'BITRATE_CHANGE',\n  HIT: 'HIT'\n};\n\nvar OttAnalytics = function (_BasePlugin) {\n  _inherits(OttAnalytics, _BasePlugin);\n\n  _createClass(OttAnalytics, null, [{\n    key: 'isValid',\n\n\n    /**\n     * Whether the ima plugin is valid.\n     * @static\n     * @override\n     * @public\n     */\n    value: function isValid() {\n      return true;\n    }\n    /**\n     * The default configuration of the plugin.\n     * @type {Object}\n     * @static\n     */\n\n  }]);\n\n  /**\n   * @constructor\n   * @param {string} name - The plugin name.\n   * @param {Player} player - The player instance.\n   * @param {Object} config - The plugin config.\n   */\n  function OttAnalytics(name, player, config) {\n    _classCallCheck(this, OttAnalytics);\n\n    var _this = _possibleConstructorReturn(this, (OttAnalytics.__proto__ || Object.getPrototypeOf(OttAnalytics)).call(this, name, player, config));\n\n    _this._isPlaying = false;\n    _this._concurrentFlag = false;\n    _this._fileId = 0;\n    _this._didFirstPlay = false;\n    _this._mediaHitInterval = null;\n    _this._isPlaying = false;\n\n    if (_this.config.serviceUrl) {\n      _this._registerListeners();\n    } else {\n      _this.logger.warn('No service URL provided. Tracking aborted');\n    }\n    return _this;\n  }\n\n  /**\n   * Destroys the plugin.\n   * @override\n   * @public\n   * @returns {void}\n   */\n\n\n  _createClass(OttAnalytics, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.eventManager.destroy();\n    }\n\n    /**\n     * Registers the player listeners.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_registerListeners',\n    value: function _registerListeners() {\n      var _this2 = this;\n\n      var PlayerEvent = this.player.Event;\n      this.eventManager.listen(this.player, PlayerEvent.FIRST_PLAY, function () {\n        return _this2._onFirstPlay();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.PLAY, function () {\n        return _this2._onPlay();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.PAUSE, function () {\n        return _this2._onPause();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.ENDED, function () {\n        return _this2._onEnded();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.SEEKED, function () {\n        return _this2._onSeeked();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.VIDEO_TRACK_CHANGED, function () {\n        return _this2._onVideoTrackChanged();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.CHANGE_SOURCE_STARTED, function () {\n        return _this2._onChangeSourceStarted();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.SOURCE_SELECTED, function (event) {\n        return _this2._onSourceSelected(event);\n      });\n      this.eventManager.listen(this.player, PlayerEvent.MEDIA_LOADED, function () {\n        return _this2._onMediaLoaded();\n      });\n    }\n\n    /**\n     * The source selected event listener.\n     * @param {Object} event - The event object.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onSourceSelected',\n    value: function _onSourceSelected(event) {\n      try {\n        var source = event.payload.selectedSource[0];\n        var parts = source.id.split(',');\n        var id = parts[0];\n        this._fileId = parseInt(id);\n      } catch (e) {\n        this.logger.warn('Unable to parse file ID');\n      }\n    }\n\n    /**\n     * The media loaded event listener.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onMediaLoaded',\n    value: function _onMediaLoaded() {\n      this._sendAnalytics(OttAnalyticsEvent.LOAD, this._eventParams);\n    }\n\n    /**\n     * The play event listener.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onPlay',\n    value: function _onPlay() {\n      this._isPlaying = true;\n      this._startMediaHitInterval();\n      this._sendAnalytics(OttAnalyticsEvent.PLAY, this._eventParams);\n    }\n\n    /**\n     * The pause event listener.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onPause',\n    value: function _onPause() {\n      this._isPlaying = false;\n      if (this._didFirstPlay) {\n        this._sendAnalytics(OttAnalyticsEvent.PAUSE, this._eventParams);\n      }\n    }\n\n    /**\n     * The ended event listener.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onEnded',\n    value: function _onEnded() {\n      this._isPlaying = false;\n      this._clearMediaHitInterval();\n      this._sendAnalytics(OttAnalyticsEvent.FINISH, this._eventParams);\n    }\n\n    /**\n     * The first play event listener.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onFirstPlay',\n    value: function _onFirstPlay() {\n      this._didFirstPlay = true;\n      this._sendAnalytics(OttAnalyticsEvent.FIRST_PLAY, this._eventParams);\n    }\n\n    /**\n     * Sets _playFromContinue to false on seeked event.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onSeeked',\n    value: function _onSeeked() {\n      this._playFromContinue = false;\n    }\n\n    /**\n     * Send BITRATE_CHANGE analytic.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onVideoTrackChanged',\n    value: function _onVideoTrackChanged() {\n      this._sendAnalytics(OttAnalyticsEvent.BITRATE_CHANGE, this._eventParams);\n    }\n\n    /**\n     * Sets _didFirstPlay to false on media change.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_onChangeSourceStarted',\n    value: function _onChangeSourceStarted() {\n      this._didFirstPlay = false;\n    }\n\n    /**\n     * Get the player params which relevant to analytics request.\n     * @private\n     * @returns {Object} - The player params\n     */\n\n  }, {\n    key: '_sendAnalytics',\n\n\n    /**\n     * Send analytics.\n     * @param {string} action - The action\n     * @param {string} params - The params\n     * @private\n     * @returns {void}\n     */\n    value: function _sendAnalytics(action, params) {\n      var _this3 = this;\n\n      if (!this._validate(action)) {\n        return;\n      }\n      var playerData = {\n        action: action,\n        averageBitrate: 0,\n        totalBitrate: 0,\n        currentBitrate: 0,\n        fileId: params.fileId\n      };\n      var bookMark = {\n        type: params.mediaType,\n        id: params.mediaId,\n        position: params.position,\n        playerData: playerData\n      };\n      var request = _playkitBookmarkService.OTTBookmarkService.add(this.config.serviceUrl, this.config.ks, bookMark);\n      request.doHttpRequest().then(function (data) {\n        if (data === CONCURRENT) {\n          _this3._concurrentFlag = true;\n        } else {\n          _this3.logger.debug('Analytics event sent', bookMark);\n        }\n      }, function (err) {\n        _this3.logger.warn('Failed to send analytics event', bookMark, err);\n      });\n    }\n  }, {\n    key: '_validate',\n    value: function _validate(action) {\n      var isMediaHit = action === OttAnalyticsEvent.HIT;\n      if (isMediaHit && this.config.disableMediaHit) {\n        this.logger.info('block MediaHit report');\n        return false;\n      }\n      if (!isMediaHit && this.config.disableMediaMark) {\n        this.logger.info('block MediaMark report');\n        return false;\n      }\n      if (!this.config.ks) {\n        this._logMissingParam('ks');\n        return false;\n      }\n      if (!this.config.entryId) {\n        this._logMissingParam('entryId');\n        return false;\n      }\n      if (!this._fileId) {\n        this._logMissingParam('fileId');\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: '_logMissingParam',\n    value: function _logMissingParam(missingParam) {\n      this.logger.warn('block report because of missing param ' + missingParam);\n    }\n\n    /**\n     * Starts the media hit interval.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_startMediaHitInterval',\n    value: function _startMediaHitInterval() {\n      var _this4 = this;\n\n      if (!this.player.isLive()) {\n        this._clearMediaHitInterval();\n        this._mediaHitInterval = setInterval(function () {\n          if (_this4._isPlaying) {\n            if (_this4._concurrentFlag || _this4._eventParams.position === 0) {\n              return;\n            } else {\n              _this4._sendAnalytics(OttAnalyticsEvent.HIT, _this4._eventParams);\n            }\n          }\n        }, this.config.mediaHitInterval * 1000);\n      }\n    }\n\n    /**\n     * Clears the media hit interval.\n     * @private\n     * @returns {void}\n     */\n\n  }, {\n    key: '_clearMediaHitInterval',\n    value: function _clearMediaHitInterval() {\n      if (this._mediaHitInterval) {\n        clearInterval(this._mediaHitInterval);\n        this._mediaHitInterval = null;\n      }\n    }\n  }, {\n    key: '_eventParams',\n    get: function get() {\n      return {\n        mediaType: MEDIA_TYPE,\n        fileId: this._fileId,\n        mediaId: this.config.entryId,\n        position: this.player.currentTime\n      };\n    }\n  }]);\n\n  return OttAnalytics;\n}(_playkitJs.BasePlugin);\n\nOttAnalytics.defaultConfig = {\n  mediaHitInterval: 30,\n  startTime: null,\n  disableMediaHit: false,\n  disableMediaMark: false\n};\nexports.default = OttAnalytics;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(e,t){ true?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.bookmark=t():(e.playkit=e.playkit||{},e.playkit.services=e.playkit.services||{},e.playkit.services.bookmark=t())}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=10)}([function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;r(this,e),this.headers=t}return i(e,[{key:\"getUrl\",value:function(e){return e+\"/service/\"+this.service+(this.action?\"/action/\"+this.action:\"\")}},{key:\"doHttpRequest\",value:function(){var e=this;if(!this.url)throw new Error(\"serviceUrl is mandatory for request builder\");var t=new XMLHttpRequest;return new Promise(function(n,r){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var e=JSON.parse(t.responseText);e&&\"object\"===(void 0===e?\"undefined\":o(e))&&e.code&&e.message?r(e):n(e)}else r(t.responseText)},t.open(e.method,e.url),e.headers.forEach(function(e,n){t.setRequestHeader(n,e)}),t.send(e.params)})}}]),e}();t.default=a},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0}),t.OTTConfiguration=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),a={serviceParams:{apiVersion:\"4.7.1\"}},u=function(){function e(){r(this,e)}return o(e,null,[{key:\"set\",value:function(e){e&&Object.assign(a,e)}},{key:\"get\",value:function(){return(0,i.clone)(a)}}]),e}();t.default=u,t.OTTConfiguration=u},,function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function e(t){r(this,e),this.hasError=!1,\"KalturaAPIException\"===t.objectType?(this.hasError=!0,this.error=new i(t.code,t.message)):t.error&&\"KalturaAPIException\"===t.error.objectType?(this.hasError=!0,this.error=new i(t.error.code,t.error.message)):this.data=t};t.default=o;var i=function e(t,n){r(this,e),this.code=t,this.message=n}},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function a(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function u(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.MultiRequestResult=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(6),p=r(f),v=n(3),d=r(v),y=function(e){function t(){var e,n,r,o;i(this,t);for(var u=arguments.length,s=Array(u),c=0;c<u;c++)s[c]=arguments[c];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.requests=[],o=n,a(r,o)}return u(t,e),s(t,[{key:\"add\",value:function(e){this.requests.push(e);var t={},n={service:e.service,action:e.action};return Object.assign(t,o({},this.requests.length,Object.assign(n,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:\"execute\",value:function(){var e=this;try{this.params=JSON.stringify(this.params)}catch(e){t._logger.error(\"\"+e.message)}return new Promise(function(t,n){e.doHttpRequest().then(function(e){t(new b(e))},function(e){n(\"Error on multiRequest execution, error <\"+e+\">.\")})})}}]),t}(l.default);y._logger=(0,p.default)(\"MultiRequestBuilder\"),t.default=y;var b=t.MultiRequestResult=function e(t){var n=this;i(this,e),this.results=[],this.success=!0,(t.result?t.result:t).forEach(function(t){var r=new d.default(t);if(n.results.push(r),r.hasError)return e._logger.error(\"Service returned an error with error code: \"+r.error.code+\" and message: \"+r.error.message+\".\"),void(n.success=!1)})};b._logger=(0,p.default)(\"MultiRequestResult\")},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=function e(t){var n=void 0;return Array.isArray(t)?(n=t.length>0?t.slice(0):[],n.forEach(function(t,o){(\"object\"===(void 0===t?\"undefined\":r(t))&&t!=={}||Array.isArray(t)&&t.length>0)&&(n[o]=e(t))})):\"object\"===(void 0===t?\"undefined\":r(t))?(n=Object.assign({},t),Object.keys(n).forEach(function(t){(\"object\"===r(n[t])&&n[t]!=={}||Array.isArray(n[t])&&n[t].length>0)&&(n[t]=e(n[t]))})):n=t,n};t.clone=o},function(e,t,n){\"use strict\";function r(e){return e?u.get(e):u}function o(e){return r(e).getLevel()}function i(e,t){r(t).setLevel(e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var a=n(7),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s={DEBUG:u.DEBUG,INFO:u.INFO,TIME:u.TIME,WARN:u.WARN,ERROR:u.ERROR,OFF:u.OFF};u.useDefaults({defaultLevel:u.ERROR}),t.default=r,t.LogLevel=s,t.getLogLevel=o,t.setLogLevel=i},function(e,t,n){var r,o;/*!\n * js-logger - http://github.com/jonnyreeves/js-logger\n * Jonny Reeves, http://jonnyreeves.co.uk/\n * js-logger may be freely distributed under the MIT license.\n */\n!function(i){\"use strict\";var a={};a.VERSION=\"1.4.1\";var u,s={},c=function(e,t){return function(){return t.apply(e,arguments)}},l=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};a.DEBUG=f(1,\"DEBUG\"),a.INFO=f(2,\"INFO\"),a.TIME=f(3,\"TIME\"),a.WARN=f(4,\"WARN\"),a.ERROR=f(8,\"ERROR\"),a.OFF=f(99,\"OFF\");var p=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};p.prototype={setLevel:function(e){e&&\"value\"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(a.DEBUG,arguments)},info:function(){this.invoke(a.INFO,arguments)},warn:function(){this.invoke(a.WARN,arguments)},error:function(){this.invoke(a.ERROR,arguments)},time:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,\"start\"])},timeEnd:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,\"end\"])},invoke:function(e,t){u&&this.enabledFor(e)&&u(t,l({level:e},this.context))}};var v=new p({filterLevel:a.OFF});!function(){var e=a;e.enabledFor=c(v,v.enabledFor),e.debug=c(v,v.debug),e.time=c(v,v.time),e.timeEnd=c(v,v.timeEnd),e.info=c(v,v.info),e.warn=c(v,v.warn),e.error=c(v,v.error),e.log=e.info}(),a.setHandler=function(e){u=e},a.setLevel=function(e){v.setLevel(e);for(var t in s)s.hasOwnProperty(t)&&s[t].setLevel(e)},a.getLevel=function(){return v.getLevel()},a.get=function(e){return s[e]||(s[e]=new p(l({name:e},v.context)))},a.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift(\"[\"+t.name+\"]\")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return\"undefined\"==typeof console?function(){}:function(r,o){r=Array.prototype.slice.call(r);var i,u=console.log;o.level===a.TIME?(i=(o.name?\"[\"+o.name+\"] \":\"\")+r[0],\"start\"===r[1]?console.time?console.time(i):t[i]=(new Date).getTime():console.timeEnd?console.timeEnd(i):n(u,[i+\": \"+((new Date).getTime()-t[i])+\"ms\"])):(o.level===a.WARN&&console.warn?u=console.warn:o.level===a.ERROR&&console.error?u=console.error:o.level===a.INFO&&console.info?u=console.info:o.level===a.DEBUG&&console.debug&&(u=console.debug),e.formatter(r,o),n(u,r))}},a.useDefaults=function(e){a.setLevel(e&&e.defaultLevel||a.DEBUG),a.setHandler(a.createDefaultHandler(e))},r=a,void 0!==(o=\"function\"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}()},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function a(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),c=r(s),l=n(0),f=r(l),p=n(1),v=r(p),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,null,[{key:\"add\",value:function(e,t,n){var r=new Map;r.set(\"Content-Type\",\"application/json\");var o=new f.default(r);o.service=\"bookmark\",o.action=\"add\",o.method=\"POST\",o.url=o.getUrl(e);var i={objectType:\"KalturaBookmarkPlayerData\",action:n.playerData.action,averageBitrate:n.playerData.averageBitrate,totalBitrate:n.playerData.totalBitrate,currentBitrate:n.playerData.currentBitrate,fileId:n.playerData.fileId},a={objectType:\"KalturaBookmark\",type:n.type,id:n.id,position:n.position,playerData:i},u=v.default.get(),s=u.serviceParams;return Object.assign(s,{bookmark:a,ks:t}),o.params=JSON.stringify(s),o}}]),t}(c.default);t.default=d},,function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.VERSION=t.NAME=t.RequestBuilder=t.OTTConfiguration=t.OTTBookmarkService=void 0;var o=n(0),i=r(o),a=n(1),u=r(a),s=n(8),c=r(s);t.OTTBookmarkService=c.default,t.OTTConfiguration=u.default,t.RequestBuilder=i.default,t.NAME=\"playkit-js-providers-bookmark-service\",t.VERSION=\"2.3.2\"},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),u=r(a),s=n(1),c=r(s),l=function(){function e(){o(this,e)}return i(e,null,[{key:\"getMultiRequest\",value:function(e,t){var n=c.default.get(),r=n.serviceParams;e&&Object.assign(r,{ks:e}),t&&Object.assign(r,{partnerId:t});var o=new Map;o.set(\"Content-Type\",\"application/json\");var i=new u.default(o);return i.method=\"POST\",i.service=\"multirequest\",i.url=i.getUrl(n.serviceUrl),i.params=r,i}}]),e}();t.default=l}])});\n//# sourceMappingURL=playkit-bookmark-service.js.map\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// playkit-ott-analytics.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 368758d997ccaf372652","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"playkit-js\",\"commonjs2\":\"playkit-js\",\"amd\":\"playkit-js\",\"root\":[\"playkit\",\"core\"]}\n// module id = 0\n// module chunks = 0","// @flow\nimport {registerPlugin} from 'playkit-js'\nimport OttAnalytics from './ott-analytics'\n\ndeclare var __VERSION__: string;\ndeclare var __NAME__: string;\n\nexport default OttAnalytics;\nexport {__VERSION__ as VERSION, __NAME__ as NAME};\n\n/**\n * The plugin name.\n * @type {string}\n * @const\n */\nconst pluginName: string = \"ottAnalytics\";\n\nregisterPlugin(pluginName, OttAnalytics);\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","//@flow\nimport {BasePlugin} from 'playkit-js'\nimport {OTTBookmarkService, RequestBuilder} from 'playkit-js-providers/dist/playkit-bookmark-service'\n\ntype OttAnalyticsEventType = { [event: string]: string };\nconst MEDIA_TYPE = 'MEDIA';\nconst CONCURRENT = 'Concurrent';\nconst OttAnalyticsEvent: OttAnalyticsEventType = {\n  LOAD: 'LOAD',\n  PLAY: 'PLAY',\n  PAUSE: 'PAUSE',\n  FINISH: 'FINISH',\n  FIRST_PLAY: 'FIRST_PLAY',\n  BITRATE_CHANGE: 'BITRATE_CHANGE',\n  HIT: 'HIT'\n};\n\nexport default class OttAnalytics extends BasePlugin {\n  /**\n   * The default configuration of the plugin.\n   * @type {Object}\n   * @static\n   */\n  static defaultConfig: Object = {\n    mediaHitInterval: 30,\n    startTime: null,\n    disableMediaHit: false,\n    disableMediaMark: false\n  };\n\n  /**\n   * Whether the ima plugin is valid.\n   * @static\n   * @override\n   * @public\n   */\n  static isValid(): boolean {\n    return true;\n  }\n\n  _isPlaying: boolean = false;\n  _concurrentFlag: boolean = false;\n  _fileId: number = 0;\n  _didFirstPlay: boolean = false;\n  _mediaHitInterval: ?number = null;\n  _isPlaying: boolean = false;\n\n  /**\n   * @constructor\n   * @param {string} name - The plugin name.\n   * @param {Player} player - The player instance.\n   * @param {Object} config - The plugin config.\n   */\n  constructor(name: string, player: Player, config: Object) {\n    super(name, player, config);\n    if (this.config.serviceUrl) {\n      this._registerListeners();\n    } else {\n      this.logger.warn('No service URL provided. Tracking aborted');\n    }\n  }\n\n  /**\n   * Destroys the plugin.\n   * @override\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.eventManager.destroy();\n  }\n\n  /**\n   * Registers the player listeners.\n   * @private\n   * @returns {void}\n   */\n  _registerListeners(): void {\n    const PlayerEvent = this.player.Event;\n    this.eventManager.listen(this.player, PlayerEvent.FIRST_PLAY, () => this._onFirstPlay());\n    this.eventManager.listen(this.player, PlayerEvent.PLAY, () => this._onPlay());\n    this.eventManager.listen(this.player, PlayerEvent.PAUSE, () => this._onPause());\n    this.eventManager.listen(this.player, PlayerEvent.ENDED, () => this._onEnded());\n    this.eventManager.listen(this.player, PlayerEvent.SEEKED, () => this._onSeeked());\n    this.eventManager.listen(this.player, PlayerEvent.VIDEO_TRACK_CHANGED, () => this._onVideoTrackChanged());\n    this.eventManager.listen(this.player, PlayerEvent.CHANGE_SOURCE_STARTED, () => this._onChangeSourceStarted());\n    this.eventManager.listen(this.player, PlayerEvent.SOURCE_SELECTED, event => this._onSourceSelected(event));\n    this.eventManager.listen(this.player, PlayerEvent.MEDIA_LOADED, () => this._onMediaLoaded());\n  }\n\n  /**\n   * The source selected event listener.\n   * @param {Object} event - The event object.\n   * @private\n   * @returns {void}\n   */\n  _onSourceSelected(event: Object): void {\n    try {\n      const source = event.payload.selectedSource[0];\n      const parts = source.id.split(',');\n      const id = parts[0];\n      this._fileId = parseInt(id);\n    } catch (e) {\n      this.logger.warn('Unable to parse file ID');\n    }\n  }\n\n  /**\n   * The media loaded event listener.\n   * @private\n   * @returns {void}\n   */\n  _onMediaLoaded(): void {\n    this._sendAnalytics(OttAnalyticsEvent.LOAD, this._eventParams);\n  }\n\n  /**\n   * The play event listener.\n   * @private\n   * @returns {void}\n   */\n  _onPlay(): void {\n    this._isPlaying = true;\n    this._startMediaHitInterval();\n    this._sendAnalytics(OttAnalyticsEvent.PLAY, this._eventParams);\n  }\n\n  /**\n   * The pause event listener.\n   * @private\n   * @returns {void}\n   */\n  _onPause(): void {\n    this._isPlaying = false;\n    if (this._didFirstPlay) {\n      this._sendAnalytics(OttAnalyticsEvent.PAUSE, this._eventParams);\n    }\n  }\n\n  /**\n   * The ended event listener.\n   * @private\n   * @returns {void}\n   */\n  _onEnded(): void {\n    this._isPlaying = false;\n    this._clearMediaHitInterval();\n    this._sendAnalytics(OttAnalyticsEvent.FINISH, this._eventParams);\n  }\n\n  /**\n   * The first play event listener.\n   * @private\n   * @returns {void}\n   */\n  _onFirstPlay(): void {\n    this._didFirstPlay = true;\n    this._sendAnalytics(OttAnalyticsEvent.FIRST_PLAY, this._eventParams);\n  }\n\n  /**\n   * Sets _playFromContinue to false on seeked event.\n   * @private\n   * @returns {void}\n   */\n  _onSeeked(): void {\n    this._playFromContinue = false;\n  }\n\n  /**\n   * Send BITRATE_CHANGE analytic.\n   * @private\n   * @returns {void}\n   */\n  _onVideoTrackChanged(): void {\n    this._sendAnalytics(OttAnalyticsEvent.BITRATE_CHANGE, this._eventParams);\n  }\n\n  /**\n   * Sets _didFirstPlay to false on media change.\n   * @private\n   * @returns {void}\n   */\n  _onChangeSourceStarted(): void {\n    this._didFirstPlay = false;\n  }\n\n  /**\n   * Get the player params which relevant to analytics request.\n   * @private\n   * @returns {Object} - The player params\n   */\n  get _eventParams(): Object {\n    return {\n      mediaType: MEDIA_TYPE,\n      fileId: this._fileId,\n      mediaId: this.config.entryId,\n      position: this.player.currentTime\n    };\n  }\n\n  /**\n   * Send analytics.\n   * @param {string} action - The action\n   * @param {string} params - The params\n   * @private\n   * @returns {void}\n   */\n  _sendAnalytics(action: string, params: Object): void {\n    if (!this._validate(action)) {\n      return;\n    }\n    const playerData: Object = {\n      action: action,\n      averageBitrate: 0,\n      totalBitrate: 0,\n      currentBitrate: 0,\n      fileId: params.fileId,\n    };\n    const bookMark: Object = {\n      type: params.mediaType,\n      id: params.mediaId,\n      position: params.position,\n      playerData: playerData\n    };\n    const request: RequestBuilder = OTTBookmarkService.add(this.config.serviceUrl, this.config.ks, bookMark);\n    request.doHttpRequest()\n      .then((data) => {\n        if (data === CONCURRENT) {\n          this._concurrentFlag = true;\n        } else {\n          this.logger.debug('Analytics event sent', bookMark);\n        }\n      }, err => {\n        this.logger.warn('Failed to send analytics event', bookMark, err);\n      });\n  }\n\n  _validate(action: string): boolean {\n    const isMediaHit = action === OttAnalyticsEvent.HIT;\n    if (isMediaHit && this.config.disableMediaHit) {\n      this.logger.info(`block MediaHit report`);\n      return false;\n    }\n    if (!isMediaHit && this.config.disableMediaMark) {\n      this.logger.info(`block MediaMark report`);\n      return false;\n    }\n    if (!this.config.ks) {\n      this._logMissingParam('ks');\n      return false;\n    }\n    if (!this.config.entryId) {\n      this._logMissingParam('entryId');\n      return false;\n    }\n    if (!this._fileId) {\n      this._logMissingParam('fileId');\n      return false;\n    }\n    return true;\n  }\n\n  _logMissingParam(missingParam: string): void {\n    this.logger.warn(`block report because of missing param ${missingParam}`);\n  }\n\n  /**\n   * Starts the media hit interval.\n   * @private\n   * @returns {void}\n   */\n  _startMediaHitInterval(): void {\n    if (!this.player.isLive()) {\n      this._clearMediaHitInterval();\n      this._mediaHitInterval = setInterval(() => {\n        if (this._isPlaying) {\n          if (this._concurrentFlag || this._eventParams.position === 0) {\n            return;\n          } else {\n            this._sendAnalytics(OttAnalyticsEvent.HIT, this._eventParams);\n          }\n        }\n      }, this.config.mediaHitInterval * 1000);\n    }\n  }\n\n  /**\n   * Clears the media hit interval.\n   * @private\n   * @returns {void}\n   */\n  _clearMediaHitInterval(): void {\n    if (this._mediaHitInterval) {\n      clearInterval(this._mediaHitInterval);\n      this._mediaHitInterval = null;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ott-analytics.js","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.bookmark=t():(e.playkit=e.playkit||{},e.playkit.services=e.playkit.services||{},e.playkit.services.bookmark=t())}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=10)}([function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;r(this,e),this.headers=t}return i(e,[{key:\"getUrl\",value:function(e){return e+\"/service/\"+this.service+(this.action?\"/action/\"+this.action:\"\")}},{key:\"doHttpRequest\",value:function(){var e=this;if(!this.url)throw new Error(\"serviceUrl is mandatory for request builder\");var t=new XMLHttpRequest;return new Promise(function(n,r){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var e=JSON.parse(t.responseText);e&&\"object\"===(void 0===e?\"undefined\":o(e))&&e.code&&e.message?r(e):n(e)}else r(t.responseText)},t.open(e.method,e.url),e.headers.forEach(function(e,n){t.setRequestHeader(n,e)}),t.send(e.params)})}}]),e}();t.default=a},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0}),t.OTTConfiguration=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),a={serviceParams:{apiVersion:\"4.7.1\"}},u=function(){function e(){r(this,e)}return o(e,null,[{key:\"set\",value:function(e){e&&Object.assign(a,e)}},{key:\"get\",value:function(){return(0,i.clone)(a)}}]),e}();t.default=u,t.OTTConfiguration=u},,function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function e(t){r(this,e),this.hasError=!1,\"KalturaAPIException\"===t.objectType?(this.hasError=!0,this.error=new i(t.code,t.message)):t.error&&\"KalturaAPIException\"===t.error.objectType?(this.hasError=!0,this.error=new i(t.error.code,t.error.message)):this.data=t};t.default=o;var i=function e(t,n){r(this,e),this.code=t,this.message=n}},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function a(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function u(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.MultiRequestResult=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(6),p=r(f),v=n(3),d=r(v),y=function(e){function t(){var e,n,r,o;i(this,t);for(var u=arguments.length,s=Array(u),c=0;c<u;c++)s[c]=arguments[c];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.requests=[],o=n,a(r,o)}return u(t,e),s(t,[{key:\"add\",value:function(e){this.requests.push(e);var t={},n={service:e.service,action:e.action};return Object.assign(t,o({},this.requests.length,Object.assign(n,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:\"execute\",value:function(){var e=this;try{this.params=JSON.stringify(this.params)}catch(e){t._logger.error(\"\"+e.message)}return new Promise(function(t,n){e.doHttpRequest().then(function(e){t(new b(e))},function(e){n(\"Error on multiRequest execution, error <\"+e+\">.\")})})}}]),t}(l.default);y._logger=(0,p.default)(\"MultiRequestBuilder\"),t.default=y;var b=t.MultiRequestResult=function e(t){var n=this;i(this,e),this.results=[],this.success=!0,(t.result?t.result:t).forEach(function(t){var r=new d.default(t);if(n.results.push(r),r.hasError)return e._logger.error(\"Service returned an error with error code: \"+r.error.code+\" and message: \"+r.error.message+\".\"),void(n.success=!1)})};b._logger=(0,p.default)(\"MultiRequestResult\")},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=function e(t){var n=void 0;return Array.isArray(t)?(n=t.length>0?t.slice(0):[],n.forEach(function(t,o){(\"object\"===(void 0===t?\"undefined\":r(t))&&t!=={}||Array.isArray(t)&&t.length>0)&&(n[o]=e(t))})):\"object\"===(void 0===t?\"undefined\":r(t))?(n=Object.assign({},t),Object.keys(n).forEach(function(t){(\"object\"===r(n[t])&&n[t]!=={}||Array.isArray(n[t])&&n[t].length>0)&&(n[t]=e(n[t]))})):n=t,n};t.clone=o},function(e,t,n){\"use strict\";function r(e){return e?u.get(e):u}function o(e){return r(e).getLevel()}function i(e,t){r(t).setLevel(e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var a=n(7),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s={DEBUG:u.DEBUG,INFO:u.INFO,TIME:u.TIME,WARN:u.WARN,ERROR:u.ERROR,OFF:u.OFF};u.useDefaults({defaultLevel:u.ERROR}),t.default=r,t.LogLevel=s,t.getLogLevel=o,t.setLogLevel=i},function(e,t,n){var r,o;/*!\n * js-logger - http://github.com/jonnyreeves/js-logger\n * Jonny Reeves, http://jonnyreeves.co.uk/\n * js-logger may be freely distributed under the MIT license.\n */\n!function(i){\"use strict\";var a={};a.VERSION=\"1.4.1\";var u,s={},c=function(e,t){return function(){return t.apply(e,arguments)}},l=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};a.DEBUG=f(1,\"DEBUG\"),a.INFO=f(2,\"INFO\"),a.TIME=f(3,\"TIME\"),a.WARN=f(4,\"WARN\"),a.ERROR=f(8,\"ERROR\"),a.OFF=f(99,\"OFF\");var p=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};p.prototype={setLevel:function(e){e&&\"value\"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(a.DEBUG,arguments)},info:function(){this.invoke(a.INFO,arguments)},warn:function(){this.invoke(a.WARN,arguments)},error:function(){this.invoke(a.ERROR,arguments)},time:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,\"start\"])},timeEnd:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,\"end\"])},invoke:function(e,t){u&&this.enabledFor(e)&&u(t,l({level:e},this.context))}};var v=new p({filterLevel:a.OFF});!function(){var e=a;e.enabledFor=c(v,v.enabledFor),e.debug=c(v,v.debug),e.time=c(v,v.time),e.timeEnd=c(v,v.timeEnd),e.info=c(v,v.info),e.warn=c(v,v.warn),e.error=c(v,v.error),e.log=e.info}(),a.setHandler=function(e){u=e},a.setLevel=function(e){v.setLevel(e);for(var t in s)s.hasOwnProperty(t)&&s[t].setLevel(e)},a.getLevel=function(){return v.getLevel()},a.get=function(e){return s[e]||(s[e]=new p(l({name:e},v.context)))},a.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift(\"[\"+t.name+\"]\")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return\"undefined\"==typeof console?function(){}:function(r,o){r=Array.prototype.slice.call(r);var i,u=console.log;o.level===a.TIME?(i=(o.name?\"[\"+o.name+\"] \":\"\")+r[0],\"start\"===r[1]?console.time?console.time(i):t[i]=(new Date).getTime():console.timeEnd?console.timeEnd(i):n(u,[i+\": \"+((new Date).getTime()-t[i])+\"ms\"])):(o.level===a.WARN&&console.warn?u=console.warn:o.level===a.ERROR&&console.error?u=console.error:o.level===a.INFO&&console.info?u=console.info:o.level===a.DEBUG&&console.debug&&(u=console.debug),e.formatter(r,o),n(u,r))}},a.useDefaults=function(e){a.setLevel(e&&e.defaultLevel||a.DEBUG),a.setHandler(a.createDefaultHandler(e))},r=a,void 0!==(o=\"function\"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}()},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function a(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(11),c=r(s),l=n(0),f=r(l),p=n(1),v=r(p),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,null,[{key:\"add\",value:function(e,t,n){var r=new Map;r.set(\"Content-Type\",\"application/json\");var o=new f.default(r);o.service=\"bookmark\",o.action=\"add\",o.method=\"POST\",o.url=o.getUrl(e);var i={objectType:\"KalturaBookmarkPlayerData\",action:n.playerData.action,averageBitrate:n.playerData.averageBitrate,totalBitrate:n.playerData.totalBitrate,currentBitrate:n.playerData.currentBitrate,fileId:n.playerData.fileId},a={objectType:\"KalturaBookmark\",type:n.type,id:n.id,position:n.position,playerData:i},u=v.default.get(),s=u.serviceParams;return Object.assign(s,{bookmark:a,ks:t}),o.params=JSON.stringify(s),o}}]),t}(c.default);t.default=d},,function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.VERSION=t.NAME=t.RequestBuilder=t.OTTConfiguration=t.OTTBookmarkService=void 0;var o=n(0),i=r(o),a=n(1),u=r(a),s=n(8),c=r(s);t.OTTBookmarkService=c.default,t.OTTConfiguration=u.default,t.RequestBuilder=i.default,t.NAME=\"playkit-js-providers-bookmark-service\",t.VERSION=\"2.3.2\"},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),u=r(a),s=n(1),c=r(s),l=function(){function e(){o(this,e)}return i(e,null,[{key:\"getMultiRequest\",value:function(e,t){var n=c.default.get(),r=n.serviceParams;e&&Object.assign(r,{ks:e}),t&&Object.assign(r,{partnerId:t});var o=new Map;o.set(\"Content-Type\",\"application/json\");var i=new u.default(o);return i.method=\"POST\",i.service=\"multirequest\",i.url=i.getUrl(n.serviceUrl),i.params=r,i}}]),e}();t.default=l}])});\n//# sourceMappingURL=playkit-bookmark-service.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/playkit-js-providers/dist/playkit-bookmark-service.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}