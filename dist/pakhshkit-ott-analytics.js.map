{"version":3,"sources":["./ott-analytics/webpack/universalModuleDefinition","./ott-analytics/pakhshkit-ott-analytics.js","./ott-analytics/webpack/bootstrap f6e58bd6ea8df9a24b50","./ott-analytics/external {\"commonjs\":\"pakhshkit-js\",\"commonjs2\":\"pakhshkit-js\",\"amd\":\"pakhshkit-js\",\"root\":[\"pakhshkit\",\"core\"]}","./ott-analytics/./index.js","./ott-analytics/./ott-analytics.js","./ott-analytics/../node_modules/pakhshkit-js-providers/dist/pakhshkit-bookmark-service.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","NAME","VERSION","undefined","_pakhshkitJs","_ottAnalytics","_ottAnalytics2","obj","default","registerPlugin","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","length","descriptor","key","protoProps","staticProps","_pakhshkitBookmarkService","OttAnalyticsEvent","LOAD","PLAY","PAUSE","FINISH","FIRST_PLAY","BITRATE_CHANGE","HIT","OttAnalytics","_BasePlugin","player","config","_this","getPrototypeOf","serviceUrl","_initializeMembers","_registerListeners","_sendAnalytics","_eventParams","logger","warn","eventManager","destroy","_this2","PlayerEvent","Event","listen","_onFirstPlay","_onPlay","_onPause","ENDED","_onEnded","SEEKED","_onSeeked","VIDEO_TRACK_CHANGED","_onVideoTrackChanged","CHANGE_SOURCE_STARTED","_onChangeSourceStarted","SOURCE_SELECTED","event","_onSourceSelected","source","payload","selectedSource","parts","id","split","_fileId","parseInt","e","error","_isPlaying","_startMediaHitInterval","_didFirstPlay","_clearMediaHitInterval","_playFromContinue","action","params","_this3","playerData","averageBitrate","totalBitrate","currentBitrate","fileId","bookMark","type","mediaType","mediaId","position","OTTBookmarkService","add","vs","doHttpRequest","then","data","_concurrentFlag","debug","err","_this4","_mediaHitInterval","setInterval","mediaHitInterval","clearInterval","startTime","_continueTime","entryId","currentTime","BasePlugin","defaultConfig","t","r","Symbol","iterator","u","arguments","Map","headers","service","url","Error","XMLHttpRequest","Promise","onreadystatechange","readyState","status","JSON","parse","responseText","code","message","open","method","forEach","setRequestHeader","send","OTTConfiguration","serviceParams","apiVersion","a","assign","clone","Array","isArray","slice","keys","getLevel","setLevel","setLogLevel","getLogLevel","LogLevel","DEBUG","INFO","TIME","WARN","ERROR","OFF","useDefaults","defaultLevel","hasError","objectType","MultiRequestResult","f","v","y","apply","concat","requests","push","stringify","_logger","h","results","success","result","context","filterLevel","log","info","enabledFor","invoke","time","timeEnd","level","setHandler","createDefaultHandler","formatter","unshift","Function","console","Date","getTime","set","getUrl","bookmark","RequestBuilder","partnerId"],"mappings":"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","file":"pakhshkit-ott-analytics.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"pakhshkit-js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"pakhshkit-js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ottanalytics\"] = factory(require(\"pakhshkit-js\"));\n\telse\n\t\troot[\"pakhshkit\"] = root[\"pakhshkit\"] || {}, root[\"pakhshkit\"][\"ottanalytics\"] = factory(root[\"pakhshkit\"][\"core\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"pakhshkit-js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"pakhshkit-js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ottanalytics\"] = factory(require(\"pakhshkit-js\"));\n\telse\n\t\troot[\"pakhshkit\"] = root[\"pakhshkit\"] || {}, root[\"pakhshkit\"][\"ottanalytics\"] = factory(root[\"pakhshkit\"][\"core\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NAME = exports.VERSION = undefined;\n\nvar _pakhshkitJs = __webpack_require__(0);\n\nvar _ottAnalytics = __webpack_require__(2);\n\nvar _ottAnalytics2 = _interopRequireDefault(_ottAnalytics);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _ottAnalytics2.default;\nexports.VERSION = \"0.1.2\";\nexports.NAME = \"pakhshkit-js-ott-analytics\";\n\n/**\r\n * The plugin name.\r\n * @type {string}\r\n * @const\r\n */\n\nvar pluginName = \"ottAnalytics\";\n\n(0, _pakhshkitJs.registerPlugin)(pluginName, _ottAnalytics2.default);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pakhshkitJs = __webpack_require__(0);\n\nvar _pakhshkitBookmarkService = __webpack_require__(3);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MEDIA_TYPE = 'MEDIA';\nvar CONCURRENT = 'Concurrent';\nvar OttAnalyticsEvent = {\n  LOAD: 'LOAD',\n  PLAY: 'PLAY',\n  PAUSE: 'PAUSE',\n  FINISH: 'FINISH',\n  FIRST_PLAY: 'FIRST_PLAY',\n  BITRATE_CHANGE: 'BITRATE_CHANGE',\n  HIT: 'HIT'\n};\n\nvar OttAnalytics = function (_BasePlugin) {\n  _inherits(OttAnalytics, _BasePlugin);\n\n  _createClass(OttAnalytics, null, [{\n    key: 'isValid',\n\n\n    /**\r\n     * Whether the ima plugin is valid.\r\n     * @static\r\n     * @override\r\n     * @public\r\n     */\n    value: function isValid() {\n      return true;\n    }\n    /**\r\n     * The default configuration of the plugin.\r\n     * @type {Object}\r\n     * @static\r\n     */\n\n  }]);\n\n  /**\r\n   * @constructor\r\n   * @param {string} name - The plugin name.\r\n   * @param {Player} player - The player instance.\r\n   * @param {Object} config - The plugin config.\r\n   */\n  function OttAnalytics(name, player, config) {\n    _classCallCheck(this, OttAnalytics);\n\n    var _this = _possibleConstructorReturn(this, (OttAnalytics.__proto__ || Object.getPrototypeOf(OttAnalytics)).call(this, name, player, config));\n\n    if (_this.config.serviceUrl) {\n      _this._initializeMembers();\n      _this._registerListeners();\n      _this._sendAnalytics(OttAnalyticsEvent.LOAD, _this._eventParams);\n    } else {\n      _this.logger.warn('No service URL provided. Tracking aborted');\n    }\n    return _this;\n  }\n\n  /**\r\n   * Destroys the plugin.\r\n   * @override\r\n   * @public\r\n   * @returns {void}\r\n   */\n\n\n  _createClass(OttAnalytics, [{\n    key: 'destroy',\n    value: function destroy() {\n      this.eventManager.destroy();\n    }\n\n    /**\r\n     * Registers the player listeners.\r\n     * @private\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: '_registerListeners',\n    value: function _registerListeners() {\n      var _this2 = this;\n\n      var PlayerEvent = this.player.Event;\n      this.eventManager.listen(this.player, PlayerEvent.FIRST_PLAY, function () {\n        return _this2._onFirstPlay();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.PLAY, function () {\n        return _this2._onPlay();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.PAUSE, function () {\n        return _this2._onPause();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.ENDED, function () {\n        return _this2._onEnded();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.SEEKED, function () {\n        return _this2._onSeeked();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.VIDEO_TRACK_CHANGED, function () {\n        return _this2._onVideoTrackChanged();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.CHANGE_SOURCE_STARTED, function () {\n        return _this2._onChangeSourceStarted();\n      });\n      this.eventManager.listen(this.player, PlayerEvent.SOURCE_SELECTED, function (event) {\n        return _this2._onSourceSelected(event);\n      });\n    }\n\n    /**\r\n     * The source selected event listener.\r\n     * @param {Object} event - The event object.\r\n     * @private\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: '_onSourceSelected',\n    value: function _onSourceSelected(event) {\n      try {\n        var source = event.payload.selectedSource[0];\n        var parts = source.id.split(',');\n        var id = parts[0];\n        this._fileId = parseInt(id);\n      } catch (e) {\n        this.logger.error(e);\n      }\n    }\n\n    /**\r\n     * The play event listener.\r\n     * @private\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: '_onPlay',\n    value: function _onPlay() {\n      this._isPlaying = true;\n      this._startMediaHitInterval();\n      this._sendAnalytics(OttAnalyticsEvent.PLAY, this._eventParams);\n    }\n\n    /**\r\n     * The pause event listener.\r\n     * @private\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: '_onPause',\n    value: function _onPause() {\n      this._isPlaying = false;\n      if (this._didFirstPlay) {\n        this._sendAnalytics(OttAnalyticsEvent.PAUSE, this._eventParams);\n      }\n    }\n\n    /**\r\n     * The ended event listener.\r\n     * @private\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: '_onEnded',\n    value: function _onEnded() {\n      this._isPlaying = false;\n      this._clearMediaHitInterval();\n      this._sendAnalytics(OttAnalyticsEvent.FINISH, this._eventParams);\n    }\n\n    /**\r\n     * The first play event listener.\r\n     * @private\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: '_onFirstPlay',\n    value: function _onFirstPlay() {\n      this._didFirstPlay = true;\n      this._sendAnalytics(OttAnalyticsEvent.FIRST_PLAY, this._eventParams);\n    }\n\n    /**\r\n     * Sets _playFromContinue to false on seeked event.\r\n     * @private\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: '_onSeeked',\n    value: function _onSeeked() {\n      this._playFromContinue = false;\n    }\n\n    /**\r\n     * Send BITRATE_CHANGE analytic.\r\n     * @private\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: '_onVideoTrackChanged',\n    value: function _onVideoTrackChanged() {\n      this._sendAnalytics(OttAnalyticsEvent.BITRATE_CHANGE, this._eventParams);\n    }\n\n    /**\r\n     * Sets _didFirstPlay to false on media change.\r\n     * @private\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: '_onChangeSourceStarted',\n    value: function _onChangeSourceStarted() {\n      this._didFirstPlay = false;\n    }\n\n    /**\r\n     * Get the player params which relevant to analytics request.\r\n     * @private\r\n     * @returns {Object} - The player params\r\n     */\n\n  }, {\n    key: '_sendAnalytics',\n\n\n    /**\r\n     * Send analytics.\r\n     * @param {string} action - The action\r\n     * @param {string} params - The params\r\n     * @private\r\n     * @returns {void}\r\n     */\n    value: function _sendAnalytics(action, params) {\n      var _this3 = this;\n\n      var playerData = {\n        action: action,\n        averageBitrate: 0, totalBitrate: 0,\n        currentBitrate: 0, fileId: params.fileId\n      };\n      var bookMark = {\n        type: params.mediaType,\n        id: params.mediaId,\n        position: params.position,\n        playerData: playerData\n      };\n      var request = _pakhshkitBookmarkService.OTTBookmarkService.add(this.config.serviceUrl, this.config.vs, bookMark);\n      request.doHttpRequest().then(function (data) {\n        if (data === CONCURRENT) {\n          _this3._concurrentFlag = true;\n        } else {\n          _this3.logger.debug('Analytics event sent', bookMark);\n        }\n      }, function (err) {\n        _this3.logger.error('Failed to send analytics event', bookMark, err);\n      });\n    }\n\n    /**\r\n     * Starts the media hit interval.\r\n     * @private\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: '_startMediaHitInterval',\n    value: function _startMediaHitInterval() {\n      var _this4 = this;\n\n      this._clearMediaHitInterval();\n      this._mediaHitInterval = setInterval(function () {\n        if (_this4._isPlaying) {\n          _this4._playFromContinue = false;\n          if (_this4._concurrentFlag || _this4._eventParams.position === 0) {\n            return;\n          } else {\n            _this4._sendAnalytics(OttAnalyticsEvent.HIT, _this4._eventParams);\n          }\n        }\n      }, this.config.mediaHitInterval * 1000);\n    }\n\n    /**\r\n     * Clears the media hit interval.\r\n     * @private\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: '_clearMediaHitInterval',\n    value: function _clearMediaHitInterval() {\n      clearInterval(this._mediaHitInterval);\n      this._mediaHitInterval = 0;\n    }\n\n    /**\r\n     * Initializes the class members.\r\n     * @private\r\n     * @returns {void}\r\n     */\n\n  }, {\n    key: '_initializeMembers',\n    value: function _initializeMembers() {\n      this._isPlaying = false;\n      this._concurrentFlag = false;\n      this._fileId = 0;\n      this._didFirstPlay = false;\n      this._mediaHitInterval = 0;\n      this._isPlaying = false;\n      if (this.config.startTime) {\n        this._continueTime = this.config.startTime;\n        this._playFromContinue = true;\n      } else {\n        this._continueTime = 0;\n        this._playFromContinue = false;\n      }\n    }\n  }, {\n    key: '_eventParams',\n    get: function get() {\n      return {\n        mediaType: MEDIA_TYPE,\n        fileId: this._fileId,\n        mediaId: this.config.entryId,\n        position: this.player.currentTime\n      };\n    }\n  }]);\n\n  return OttAnalytics;\n}(_pakhshkitJs.BasePlugin);\n\nOttAnalytics.defaultConfig = {\n  mediaHitInterval: 30,\n  startTime: null\n};\nexports.default = OttAnalytics;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(e,t){ true?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.bookmark=t():(e.pakhshkit=e.pakhshkit||{},e.pakhshkit.services=e.pakhshkit.services||{},e.pakhshkit.services.bookmark=t())}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=11)}([function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;r(this,e),this.headers=t}return i(e,[{key:\"getUrl\",value:function(e){return e+\"/service/\"+this.service+(this.action?\"/action/\"+this.action:\"\")}},{key:\"doHttpRequest\",value:function(){var e=this;if(!this.url)throw new Error(\"serviceUrl is mandatory for request builder\");var t=new XMLHttpRequest;return new Promise(function(n,r){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var e=JSON.parse(t.responseText);e&&\"object\"===(void 0===e?\"undefined\":o(e))&&e.code&&e.message?r(e):n(e)}else r(t.responseText)},t.open(e.method,e.url),e.headers.forEach(function(e,n){t.setRequestHeader(n,e)}),t.send(e.params)})}}]),e}();t.default=u},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0}),t.OTTConfiguration=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),u={serviceParams:{apiVersion:\"4.7.1\"}},a=function(){function e(){r(this,e)}return o(e,null,[{key:\"set\",value:function(e){e&&Object.assign(u,e)}},{key:\"get\",value:function(){return(0,i.clone)(u)}}]),e}();t.default=a,t.OTTConfiguration=a},,function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=function e(t){var n=void 0;return Array.isArray(t)?(n=t.length>0?t.slice(0):[],n.forEach(function(t,o){(\"object\"===(void 0===t?\"undefined\":r(t))&&t!=={}||Array.isArray(t)&&t.length>0)&&(n[o]=e(t))})):\"object\"===(void 0===t?\"undefined\":r(t))?(n=Object.assign({},t),Object.keys(n).forEach(function(t){(\"object\"===r(n[t])&&n[t]!=={}||Array.isArray(n[t])&&n[t].length>0)&&(n[t]=e(n[t]))})):n=t,n};t.clone=o},function(e,t,n){\"use strict\";function r(e){return e?a.get(e):a}function o(e){return r(e).getLevel()}function i(e,t){r(t).setLevel(e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var u=n(7),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),s={DEBUG:a.DEBUG,INFO:a.INFO,TIME:a.TIME,WARN:a.WARN,ERROR:a.ERROR,OFF:a.OFF};a.useDefaults({defaultLevel:a.ERROR}),t.default=r,t.LogLevel=s,t.getLogLevel=o,t.setLogLevel=i},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function e(t){r(this,e),this.hasError=!1,\"VidiunAPIException\"===t.objectType?(this.hasError=!0,this.error=new i(t.code,t.message)):t.error&&\"VidiunAPIException\"===t.error.objectType?(this.hasError=!0,this.error=new i(t.error.code,t.error.message)):this.data=t};t.default=o;var i=function e(t,n){r(this,e),this.code=t,this.message=n}},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function u(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function a(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.MultiRequestResult=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(4),p=r(f),v=n(5),d=r(v),y=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.requests=[],o=n,u(r,o)}return a(t,e),s(t,[{key:\"add\",value:function(e){this.requests.push(e);var t={},n={service:e.service,action:e.action};return Object.assign(t,o({},this.requests.length,Object.assign(n,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:\"execute\",value:function(){var e=this;try{this.params=JSON.stringify(this.params)}catch(e){t._logger.error(\"\"+e.message)}return new Promise(function(t,n){e.doHttpRequest().then(function(e){t(new h(e))},function(e){n(\"Error on multiRequest execution, error <\"+e+\">.\")})})}}]),t}(l.default);y._logger=(0,p.default)(\"MultiRequestBuilder\"),t.default=y;var h=t.MultiRequestResult=function e(t){var n=this;i(this,e),this.results=[],this.success=!0,(t.result?t.result:t).forEach(function(t){var r=new d.default(t);if(n.results.push(r),r.hasError)return e._logger.error(\"Service returned an error with error code: \"+r.error.code+\" and message: \"+r.error.message+\".\"),void(n.success=!1)})};h._logger=(0,p.default)(\"MultiRequestResult\")},function(e,t,n){var r,o;/*!\n * js-logger - http://github.com/jonnyreeves/js-logger\n * Jonny Reeves, http://jonnyreeves.co.uk/\n * js-logger may be freely distributed under the MIT license.\n */\n!function(i){\"use strict\";var u={};u.VERSION=\"1.4.1\";var a,s={},c=function(e,t){return function(){return t.apply(e,arguments)}},l=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};u.DEBUG=f(1,\"DEBUG\"),u.INFO=f(2,\"INFO\"),u.TIME=f(3,\"TIME\"),u.WARN=f(4,\"WARN\"),u.ERROR=f(8,\"ERROR\"),u.OFF=f(99,\"OFF\");var p=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};p.prototype={setLevel:function(e){e&&\"value\"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(u.DEBUG,arguments)},info:function(){this.invoke(u.INFO,arguments)},warn:function(){this.invoke(u.WARN,arguments)},error:function(){this.invoke(u.ERROR,arguments)},time:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(u.TIME,[e,\"start\"])},timeEnd:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(u.TIME,[e,\"end\"])},invoke:function(e,t){a&&this.enabledFor(e)&&a(t,l({level:e},this.context))}};var v=new p({filterLevel:u.OFF});!function(){var e=u;e.enabledFor=c(v,v.enabledFor),e.debug=c(v,v.debug),e.time=c(v,v.time),e.timeEnd=c(v,v.timeEnd),e.info=c(v,v.info),e.warn=c(v,v.warn),e.error=c(v,v.error),e.log=e.info}(),u.setHandler=function(e){a=e},u.setLevel=function(e){v.setLevel(e);for(var t in s)s.hasOwnProperty(t)&&s[t].setLevel(e)},u.getLevel=function(){return v.getLevel()},u.get=function(e){return s[e]||(s[e]=new p(l({name:e},v.context)))},u.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift(\"[\"+t.name+\"]\")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return\"undefined\"==typeof console?function(){}:function(r,o){r=Array.prototype.slice.call(r);var i,a=console.log;o.level===u.TIME?(i=(o.name?\"[\"+o.name+\"] \":\"\")+r[0],\"start\"===r[1]?console.time?console.time(i):t[i]=(new Date).getTime():console.timeEnd?console.timeEnd(i):n(a,[i+\": \"+((new Date).getTime()-t[i])+\"ms\"])):(o.level===u.WARN&&console.warn?a=console.warn:o.level===u.ERROR&&console.error?a=console.error:o.level===u.INFO&&console.info?a=console.info:o.level===u.DEBUG&&console.debug&&(a=console.debug),e.formatter(r,o),n(a,r))}},u.useDefaults=function(e){u.setLevel(e&&e.defaultLevel||u.DEBUG),u.setHandler(u.createDefaultHandler(e))},r=u,void 0!==(o=\"function\"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}()},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function u(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(12),c=r(s),l=n(0),f=r(l),p=n(1),v=r(p),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,null,[{key:\"add\",value:function(e,t,n){var r=new Map;r.set(\"Content-Type\",\"application/json\");var o=new f.default(r);o.service=\"bookmark\",o.action=\"add\",o.method=\"POST\",o.url=o.getUrl(e);var i={objectType:\"VidiunBookmarkPlayerData\",action:n.playerData.action,averageBitrate:n.playerData.averageBitrate,totalBitrate:n.playerData.totalBitrate,currentBitrate:n.playerData.currentBitrate,fileId:n.playerData.fileId},u={objectType:\"VidiunBookmark\",type:n.type,id:n.id,position:n.position,playerData:i},a=v.default.get(),s=a.serviceParams;return Object.assign(s,{bookmark:u,vs:t}),o.params=JSON.stringify(s),o}}]),t}(c.default);t.default=d},,,function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.VERSION=t.NAME=t.RequestBuilder=t.OTTConfiguration=t.OTTBookmarkService=void 0;var o=n(0),i=r(o),u=n(1),a=r(u),s=n(8),c=r(s);t.OTTBookmarkService=c.default,t.OTTConfiguration=a.default,t.RequestBuilder=i.default,t.NAME=\"pakhshkit-js-providers-bookmark-service\",t.VERSION=\"2.3.2\"},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(6),a=r(u),s=n(1),c=r(s),l=function(){function e(){o(this,e)}return i(e,null,[{key:\"getMultiRequest\",value:function(e,t){var n=c.default.get(),r=n.serviceParams;e&&Object.assign(r,{vs:e}),t&&Object.assign(r,{partnerId:t});var o=new Map;o.set(\"Content-Type\",\"application/json\");var i=new a.default(o);return i.method=\"POST\",i.service=\"multirequest\",i.url=i.getUrl(n.serviceUrl),i.params=r,i}}]),e}();t.default=l}])});\n//# sourceMappingURL=pakhshkit-bookmark-service.js.map\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// pakhshkit-ott-analytics.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f6e58bd6ea8df9a24b50","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"pakhshkit-js\",\"commonjs2\":\"pakhshkit-js\",\"amd\":\"pakhshkit-js\",\"root\":[\"pakhshkit\",\"core\"]}\n// module id = 0\n// module chunks = 0","// @flow\r\nimport {registerPlugin} from 'pakhshkit-js'\r\nimport OttAnalytics from './ott-analytics'\r\n\r\ndeclare var __VERSION__: string;\r\ndeclare var __NAME__: string;\r\n\r\nexport default OttAnalytics;\r\nexport {__VERSION__ as VERSION, __NAME__ as NAME};\r\n\r\n/**\r\n * The plugin name.\r\n * @type {string}\r\n * @const\r\n */\r\nconst pluginName: string = \"ottAnalytics\";\r\n\r\nregisterPlugin(pluginName, OttAnalytics);\r\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","//@flow\r\nimport {BasePlugin} from 'pakhshkit-js'\r\nimport {OTTBookmarkService, RequestBuilder} from 'pakhshkit-js-providers/dist/pakhshkit-bookmark-service'\r\n\r\ntype OttAnalyticsEventType = { [event: string]: string };\r\nconst MEDIA_TYPE = 'MEDIA';\r\nconst CONCURRENT = 'Concurrent';\r\nconst OttAnalyticsEvent: OttAnalyticsEventType = {\r\n  LOAD: 'LOAD',\r\n  PLAY: 'PLAY',\r\n  PAUSE: 'PAUSE',\r\n  FINISH: 'FINISH',\r\n  FIRST_PLAY: 'FIRST_PLAY',\r\n  BITRATE_CHANGE: 'BITRATE_CHANGE',\r\n  HIT: 'HIT'\r\n};\r\n\r\nexport default class OttAnalytics extends BasePlugin {\r\n  /**\r\n   * The default configuration of the plugin.\r\n   * @type {Object}\r\n   * @static\r\n   */\r\n  static defaultConfig: Object = {\r\n    mediaHitInterval: 30,\r\n    startTime: null\r\n  };\r\n\r\n  /**\r\n   * Whether the ima plugin is valid.\r\n   * @static\r\n   * @override\r\n   * @public\r\n   */\r\n  static isValid(): boolean {\r\n    return true;\r\n  }\r\n\r\n  _isPlaying: boolean;\r\n  _concurrentFlag: boolean;\r\n  _fileId: number;\r\n  _didFirstPlay: boolean;\r\n  _mediaHitInterval: number;\r\n  _continueTime: number;\r\n  _playFromContinue: boolean;\r\n  _isPlaying: boolean;\r\n\r\n  /**\r\n   * @constructor\r\n   * @param {string} name - The plugin name.\r\n   * @param {Player} player - The player instance.\r\n   * @param {Object} config - The plugin config.\r\n   */\r\n  constructor(name: string, player: Player, config: Object) {\r\n    super(name, player, config);\r\n    if (this.config.serviceUrl) {\r\n      this._initializeMembers();\r\n      this._registerListeners();\r\n      this._sendAnalytics(OttAnalyticsEvent.LOAD, this._eventParams);\r\n    } else {\r\n      this.logger.warn('No service URL provided. Tracking aborted');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroys the plugin.\r\n   * @override\r\n   * @public\r\n   * @returns {void}\r\n   */\r\n  destroy(): void {\r\n    this.eventManager.destroy();\r\n  }\r\n\r\n  /**\r\n   * Registers the player listeners.\r\n   * @private\r\n   * @returns {void}\r\n   */\r\n  _registerListeners(): void {\r\n    const PlayerEvent = this.player.Event;\r\n    this.eventManager.listen(this.player, PlayerEvent.FIRST_PLAY, () => this._onFirstPlay());\r\n    this.eventManager.listen(this.player, PlayerEvent.PLAY, () => this._onPlay());\r\n    this.eventManager.listen(this.player, PlayerEvent.PAUSE, () => this._onPause());\r\n    this.eventManager.listen(this.player, PlayerEvent.ENDED, () => this._onEnded());\r\n    this.eventManager.listen(this.player, PlayerEvent.SEEKED, () => this._onSeeked());\r\n    this.eventManager.listen(this.player, PlayerEvent.VIDEO_TRACK_CHANGED, () => this._onVideoTrackChanged());\r\n    this.eventManager.listen(this.player, PlayerEvent.CHANGE_SOURCE_STARTED, () => this._onChangeSourceStarted());\r\n    this.eventManager.listen(this.player, PlayerEvent.SOURCE_SELECTED, event => this._onSourceSelected(event));\r\n  }\r\n\r\n  /**\r\n   * The source selected event listener.\r\n   * @param {Object} event - The event object.\r\n   * @private\r\n   * @returns {void}\r\n   */\r\n  _onSourceSelected(event: Object): void {\r\n    try {\r\n      const source = event.payload.selectedSource[0];\r\n      const parts = source.id.split(',');\r\n      const id = parts[0];\r\n      this._fileId = parseInt(id);\r\n    } catch (e) {\r\n      this.logger.error(e);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The play event listener.\r\n   * @private\r\n   * @returns {void}\r\n   */\r\n  _onPlay(): void {\r\n    this._isPlaying = true;\r\n    this._startMediaHitInterval();\r\n    this._sendAnalytics(OttAnalyticsEvent.PLAY, this._eventParams);\r\n  }\r\n\r\n  /**\r\n   * The pause event listener.\r\n   * @private\r\n   * @returns {void}\r\n   */\r\n  _onPause(): void {\r\n    this._isPlaying = false;\r\n    if (this._didFirstPlay) {\r\n      this._sendAnalytics(OttAnalyticsEvent.PAUSE, this._eventParams);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The ended event listener.\r\n   * @private\r\n   * @returns {void}\r\n   */\r\n  _onEnded(): void {\r\n    this._isPlaying = false;\r\n    this._clearMediaHitInterval();\r\n    this._sendAnalytics(OttAnalyticsEvent.FINISH, this._eventParams);\r\n  }\r\n\r\n  /**\r\n   * The first play event listener.\r\n   * @private\r\n   * @returns {void}\r\n   */\r\n  _onFirstPlay(): void {\r\n    this._didFirstPlay = true;\r\n    this._sendAnalytics(OttAnalyticsEvent.FIRST_PLAY, this._eventParams);\r\n  }\r\n\r\n  /**\r\n   * Sets _playFromContinue to false on seeked event.\r\n   * @private\r\n   * @returns {void}\r\n   */\r\n  _onSeeked(): void {\r\n    this._playFromContinue = false;\r\n  }\r\n\r\n  /**\r\n   * Send BITRATE_CHANGE analytic.\r\n   * @private\r\n   * @returns {void}\r\n   */\r\n  _onVideoTrackChanged(): void {\r\n    this._sendAnalytics(OttAnalyticsEvent.BITRATE_CHANGE, this._eventParams);\r\n  }\r\n\r\n  /**\r\n   * Sets _didFirstPlay to false on media change.\r\n   * @private\r\n   * @returns {void}\r\n   */\r\n  _onChangeSourceStarted(): void {\r\n    this._didFirstPlay = false;\r\n  }\r\n\r\n  /**\r\n   * Get the player params which relevant to analytics request.\r\n   * @private\r\n   * @returns {Object} - The player params\r\n   */\r\n  get _eventParams(): Object {\r\n    return {\r\n      mediaType: MEDIA_TYPE,\r\n      fileId: this._fileId,\r\n      mediaId: this.config.entryId,\r\n      position: this.player.currentTime\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Send analytics.\r\n   * @param {string} action - The action\r\n   * @param {string} params - The params\r\n   * @private\r\n   * @returns {void}\r\n   */\r\n  _sendAnalytics(action: string, params: Object): void {\r\n    const playerData: Object = {\r\n      action: action,\r\n      averageBitrate: 0, totalBitrate: 0,\r\n      currentBitrate: 0, fileId: params.fileId,\r\n    };\r\n    const bookMark: Object = {\r\n      type: params.mediaType,\r\n      id: params.mediaId,\r\n      position: params.position,\r\n      playerData: playerData\r\n    };\r\n    const request: RequestBuilder = OTTBookmarkService.add(this.config.serviceUrl, this.config.vs, bookMark);\r\n    request.doHttpRequest()\r\n      .then((data) => {\r\n        if (data === CONCURRENT) {\r\n          this._concurrentFlag = true;\r\n        } else {\r\n          this.logger.debug('Analytics event sent', bookMark);\r\n        }\r\n      }, err => {\r\n        this.logger.error('Failed to send analytics event', bookMark, err);\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Starts the media hit interval.\r\n   * @private\r\n   * @returns {void}\r\n   */\r\n  _startMediaHitInterval(): void {\r\n    this._clearMediaHitInterval();\r\n    this._mediaHitInterval = setInterval(() => {\r\n      if (this._isPlaying) {\r\n        this._playFromContinue = false;\r\n        if (this._concurrentFlag || this._eventParams.position === 0) {\r\n          return;\r\n        } else {\r\n          this._sendAnalytics(OttAnalyticsEvent.HIT, this._eventParams);\r\n        }\r\n      }\r\n    }, this.config.mediaHitInterval * 1000);\r\n  }\r\n\r\n  /**\r\n   * Clears the media hit interval.\r\n   * @private\r\n   * @returns {void}\r\n   */\r\n  _clearMediaHitInterval(): void {\r\n    clearInterval(this._mediaHitInterval);\r\n    this._mediaHitInterval = 0;\r\n  }\r\n\r\n  /**\r\n   * Initializes the class members.\r\n   * @private\r\n   * @returns {void}\r\n   */\r\n  _initializeMembers(): void {\r\n    this._isPlaying = false;\r\n    this._concurrentFlag = false;\r\n    this._fileId = 0;\r\n    this._didFirstPlay = false;\r\n    this._mediaHitInterval = 0;\r\n    this._isPlaying = false;\r\n    if (this.config.startTime) {\r\n      this._continueTime = this.config.startTime;\r\n      this._playFromContinue = true;\r\n    } else {\r\n      this._continueTime = 0;\r\n      this._playFromContinue = false;\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./ott-analytics.js","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.bookmark=t():(e.pakhshkit=e.pakhshkit||{},e.pakhshkit.services=e.pakhshkit.services||{},e.pakhshkit.services.bookmark=t())}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=11)}([function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;r(this,e),this.headers=t}return i(e,[{key:\"getUrl\",value:function(e){return e+\"/service/\"+this.service+(this.action?\"/action/\"+this.action:\"\")}},{key:\"doHttpRequest\",value:function(){var e=this;if(!this.url)throw new Error(\"serviceUrl is mandatory for request builder\");var t=new XMLHttpRequest;return new Promise(function(n,r){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var e=JSON.parse(t.responseText);e&&\"object\"===(void 0===e?\"undefined\":o(e))&&e.code&&e.message?r(e):n(e)}else r(t.responseText)},t.open(e.method,e.url),e.headers.forEach(function(e,n){t.setRequestHeader(n,e)}),t.send(e.params)})}}]),e}();t.default=u},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0}),t.OTTConfiguration=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),u={serviceParams:{apiVersion:\"4.7.1\"}},a=function(){function e(){r(this,e)}return o(e,null,[{key:\"set\",value:function(e){e&&Object.assign(u,e)}},{key:\"get\",value:function(){return(0,i.clone)(u)}}]),e}();t.default=a,t.OTTConfiguration=a},,function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=function e(t){var n=void 0;return Array.isArray(t)?(n=t.length>0?t.slice(0):[],n.forEach(function(t,o){(\"object\"===(void 0===t?\"undefined\":r(t))&&t!=={}||Array.isArray(t)&&t.length>0)&&(n[o]=e(t))})):\"object\"===(void 0===t?\"undefined\":r(t))?(n=Object.assign({},t),Object.keys(n).forEach(function(t){(\"object\"===r(n[t])&&n[t]!=={}||Array.isArray(n[t])&&n[t].length>0)&&(n[t]=e(n[t]))})):n=t,n};t.clone=o},function(e,t,n){\"use strict\";function r(e){return e?a.get(e):a}function o(e){return r(e).getLevel()}function i(e,t){r(t).setLevel(e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var u=n(7),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),s={DEBUG:a.DEBUG,INFO:a.INFO,TIME:a.TIME,WARN:a.WARN,ERROR:a.ERROR,OFF:a.OFF};a.useDefaults({defaultLevel:a.ERROR}),t.default=r,t.LogLevel=s,t.getLogLevel=o,t.setLogLevel=i},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function e(t){r(this,e),this.hasError=!1,\"VidiunAPIException\"===t.objectType?(this.hasError=!0,this.error=new i(t.code,t.message)):t.error&&\"VidiunAPIException\"===t.error.objectType?(this.hasError=!0,this.error=new i(t.error.code,t.error.message)):this.data=t};t.default=o;var i=function e(t,n){r(this,e),this.code=t,this.message=n}},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function u(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function a(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.MultiRequestResult=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(4),p=r(f),v=n(5),d=r(v),y=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.requests=[],o=n,u(r,o)}return a(t,e),s(t,[{key:\"add\",value:function(e){this.requests.push(e);var t={},n={service:e.service,action:e.action};return Object.assign(t,o({},this.requests.length,Object.assign(n,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:\"execute\",value:function(){var e=this;try{this.params=JSON.stringify(this.params)}catch(e){t._logger.error(\"\"+e.message)}return new Promise(function(t,n){e.doHttpRequest().then(function(e){t(new h(e))},function(e){n(\"Error on multiRequest execution, error <\"+e+\">.\")})})}}]),t}(l.default);y._logger=(0,p.default)(\"MultiRequestBuilder\"),t.default=y;var h=t.MultiRequestResult=function e(t){var n=this;i(this,e),this.results=[],this.success=!0,(t.result?t.result:t).forEach(function(t){var r=new d.default(t);if(n.results.push(r),r.hasError)return e._logger.error(\"Service returned an error with error code: \"+r.error.code+\" and message: \"+r.error.message+\".\"),void(n.success=!1)})};h._logger=(0,p.default)(\"MultiRequestResult\")},function(e,t,n){var r,o;/*!\n * js-logger - http://github.com/jonnyreeves/js-logger\n * Jonny Reeves, http://jonnyreeves.co.uk/\n * js-logger may be freely distributed under the MIT license.\n */\n!function(i){\"use strict\";var u={};u.VERSION=\"1.4.1\";var a,s={},c=function(e,t){return function(){return t.apply(e,arguments)}},l=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};u.DEBUG=f(1,\"DEBUG\"),u.INFO=f(2,\"INFO\"),u.TIME=f(3,\"TIME\"),u.WARN=f(4,\"WARN\"),u.ERROR=f(8,\"ERROR\"),u.OFF=f(99,\"OFF\");var p=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};p.prototype={setLevel:function(e){e&&\"value\"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(u.DEBUG,arguments)},info:function(){this.invoke(u.INFO,arguments)},warn:function(){this.invoke(u.WARN,arguments)},error:function(){this.invoke(u.ERROR,arguments)},time:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(u.TIME,[e,\"start\"])},timeEnd:function(e){\"string\"==typeof e&&e.length>0&&this.invoke(u.TIME,[e,\"end\"])},invoke:function(e,t){a&&this.enabledFor(e)&&a(t,l({level:e},this.context))}};var v=new p({filterLevel:u.OFF});!function(){var e=u;e.enabledFor=c(v,v.enabledFor),e.debug=c(v,v.debug),e.time=c(v,v.time),e.timeEnd=c(v,v.timeEnd),e.info=c(v,v.info),e.warn=c(v,v.warn),e.error=c(v,v.error),e.log=e.info}(),u.setHandler=function(e){a=e},u.setLevel=function(e){v.setLevel(e);for(var t in s)s.hasOwnProperty(t)&&s[t].setLevel(e)},u.getLevel=function(){return v.getLevel()},u.get=function(e){return s[e]||(s[e]=new p(l({name:e},v.context)))},u.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift(\"[\"+t.name+\"]\")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return\"undefined\"==typeof console?function(){}:function(r,o){r=Array.prototype.slice.call(r);var i,a=console.log;o.level===u.TIME?(i=(o.name?\"[\"+o.name+\"] \":\"\")+r[0],\"start\"===r[1]?console.time?console.time(i):t[i]=(new Date).getTime():console.timeEnd?console.timeEnd(i):n(a,[i+\": \"+((new Date).getTime()-t[i])+\"ms\"])):(o.level===u.WARN&&console.warn?a=console.warn:o.level===u.ERROR&&console.error?a=console.error:o.level===u.INFO&&console.info?a=console.info:o.level===u.DEBUG&&console.debug&&(a=console.debug),e.formatter(r,o),n(a,r))}},u.useDefaults=function(e){u.setLevel(e&&e.defaultLevel||u.DEBUG),u.setHandler(u.createDefaultHandler(e))},r=u,void 0!==(o=\"function\"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}()},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function u(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(12),c=r(s),l=n(0),f=r(l),p=n(1),v=r(p),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,null,[{key:\"add\",value:function(e,t,n){var r=new Map;r.set(\"Content-Type\",\"application/json\");var o=new f.default(r);o.service=\"bookmark\",o.action=\"add\",o.method=\"POST\",o.url=o.getUrl(e);var i={objectType:\"VidiunBookmarkPlayerData\",action:n.playerData.action,averageBitrate:n.playerData.averageBitrate,totalBitrate:n.playerData.totalBitrate,currentBitrate:n.playerData.currentBitrate,fileId:n.playerData.fileId},u={objectType:\"VidiunBookmark\",type:n.type,id:n.id,position:n.position,playerData:i},a=v.default.get(),s=a.serviceParams;return Object.assign(s,{bookmark:u,vs:t}),o.params=JSON.stringify(s),o}}]),t}(c.default);t.default=d},,,function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.VERSION=t.NAME=t.RequestBuilder=t.OTTConfiguration=t.OTTBookmarkService=void 0;var o=n(0),i=r(o),u=n(1),a=r(u),s=n(8),c=r(s);t.OTTBookmarkService=c.default,t.OTTConfiguration=a.default,t.RequestBuilder=i.default,t.NAME=\"pakhshkit-js-providers-bookmark-service\",t.VERSION=\"2.3.2\"},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(6),a=r(u),s=n(1),c=r(s),l=function(){function e(){o(this,e)}return i(e,null,[{key:\"getMultiRequest\",value:function(e,t){var n=c.default.get(),r=n.serviceParams;e&&Object.assign(r,{vs:e}),t&&Object.assign(r,{partnerId:t});var o=new Map;o.set(\"Content-Type\",\"application/json\");var i=new a.default(o);return i.method=\"POST\",i.service=\"multirequest\",i.url=i.getUrl(n.serviceUrl),i.params=r,i}}]),e}();t.default=l}])});\n//# sourceMappingURL=pakhshkit-bookmark-service.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/pakhshkit-js-providers/dist/pakhshkit-bookmark-service.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}